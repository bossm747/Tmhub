<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" as="style" data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&amp;display=swap" data-optimized-fonts="true"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta property="og:title" content="Jina AI is a Neural Search Company"/><meta name="author" content="Jina AI"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Jina AI"/><meta property="og:image" content="https://jina.ai/assets/images/blog/2021-01-19_Duplicate_image_detection/cover.png"/><meta property="og:type" content="website"/><meta property="og:description" content="https://jina.aiIn this blog post, we&#x27;ll build a duplicate image detection system using Jina Hub&#x27;s ImageHasher Executor"/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:image" content="https://jina.ai/assets/images/blog/2021-01-19_Duplicate_image_detection/cover.png"/><meta property="twitter:title" content="Jina AI is a Neural Search Company"/><meta property="twitter:description" content="https://jina.aiIn this blog post, we&#x27;ll build a duplicate image detection system using Jina Hub&#x27;s ImageHasher Executor"/><meta name="twitter:site" content="@JinaAI_"/><meta name="twitter:creator" content="@JinaAI_"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-96x96.png"/><link rel="icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&amp;display=swap" data-optimized-fonts="true"/><title>Jina AI | Jina AI is a Neural Search Company</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="https://jina.aiIn this blog post, we&#x27;ll build a duplicate image detection system using Jina Hub&#x27;s ImageHasher Executor"/><meta property="og:url" content="https://jina.ai/"/><meta property="og:title" content="Jina AI | Jina AI is a Neural Search Company"/><meta property="og:description" content="https://jina.aiIn this blog post, we&#x27;ll build a duplicate image detection system using Jina Hub&#x27;s ImageHasher Executor"/><meta property="og:locale" content="en"/><meta property="og:site_name" content="Jina AI, Ltd"/><link rel="canonical" href="https://jina.ai/"/><meta name="next-head-count" content="33"/><link rel="preload" href="/_next/static/css/8fb6abc1994b1d30e095.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8fb6abc1994b1d30e095.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-f47d69457824065d04c3.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-18f21ab86863c15f7e5d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5e6bbd2a974b4a7955a3.js" defer=""></script><script src="/_next/static/chunks/419-4e2ec04e0cd626c3ac83.js" defer=""></script><script src="/_next/static/chunks/522-f41528aa8639e5478b36.js" defer=""></script><script src="/_next/static/chunks/100-52df8fc7db3d95a66628.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-76b932a6871d2f15c15b.js" defer=""></script><script src="/_next/static/_xnhU9SqN4Cw45DMBNrgz/_buildManifest.js" defer=""></script><script src="/_next/static/_xnhU9SqN4Cw45DMBNrgz/_ssgManifest.js" defer=""></script><style id="__jsx-3128403005">.dropdown.jsx-3128403005{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:100%;border-radius:0.75rem;}.dropdown.jsx-3128403005>.jsx-3128403005:not([hidden])~.jsx-3128403005:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}</style><style id="__jsx-1573896879">.navbar.jsx-1573896879 a{display:inline-block;width:100%;}.navbar.jsx-1573896879 li:not(:first-child){margin-top:0.75rem;}.navbar.jsx-1573896879 a .btn{width:100%;}.navbar.jsx-1573896879 a:hover{--tw-text-opacity:1;color:rgba(0,129,129,var(--tw-text-opacity));}@media (min-width:640px){.navbar.jsx-1573896879 a,.navbar.jsx-1573896879 a .btn{width:auto;}.navbar.jsx-1573896879 li:not(:first-child){margin-top:0px;}.navbar.jsx-1573896879>li.jsx-1573896879:not(:last-child){margin-right:1.25rem;}}</style><style id="__jsx-3112819368">.top-nav-bar.jsx-3112819368{box-shadow:3px 6px 33px 0px #cdcdcd40;z-index:200;position:fixed;width:100vw;background:white;top:0;}button.jsx-3112819368:hover{opacity:0.7;}</style><style id="__jsx-1324436386">.footer-links.jsx-1324436386 li{margin-top:0.25rem;}.footer-items-title.jsx-1324436386{font-size:1.375rem;line-height:1.5rem;-webkit-letter-spacing:0.22px;-moz-letter-spacing:0.22px;-ms-letter-spacing:0.22px;letter-spacing:0.22px;}</style><style id="__jsx-1956813867">.footer-left-margin.jsx-1956813867{width:20rem;height:inherit;background:no-repeat 40% 20%/30% url("/assets/images/planet-beige.svg");}.footer-right-margin.jsx-1956813867{width:16rem;height:inherit;background:no-repeat 10% 10%/50% url("/assets/images/planet-green.svg");}</style><style data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap">@font-face{font-family:'Poppins';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLFj_V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLDz8V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrFJM.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLEj6V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLCz7V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLFj_Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLFj_Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLFj_Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLDz8Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLDz8Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLDz8Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLEj6Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLEj6Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLEj6Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLCz7Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLCz7Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLCz7Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-164627626-2"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-164627626-2', {
              page_path: window.location.pathname,
            });
          </script><body><div id="__next"><img referrerPolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=7a9a4d20-0bc0-4a28-a01a-eefccebdf948"/><div class="jsx-3112819368 top-nav-bar"><div class="md:max-w-screen-lg lg:max-w-screen-xl mx-auto px-8 py-6 undefined"><div class="jsx-1573896879 flex flex-wrap justify-between items-center"><div class="jsx-1573896879"><a class="jsx-1573896879" href="/"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo.svg" alt="Jina.ai logo" class="w-24"/></div></a></div><div class="jsx-1573896879 md:hidden"><button type="button" aria-label="show menu" class="jsx-1573896879 p-3 text-gray-900 rounded-md hover:bg-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="jsx-1573896879 stroke-current h-6 w-6"><path d="M0 0h24v24H0z" stroke="none" class="jsx-1573896879"></path><path d="M4 6h16M4 12h16M4 18h16" class="jsx-1573896879"></path></svg></button></div><nav class="jsx-1573896879 w-full md:w-auto md:block mt-6 md:mt-0 hidden"><ul class="jsx-1573896879 navbar flex flex-col md:flex-row md:items-center font-medium text-xl text-gray-800 sm:p-0 bg-white sm:bg-transparent rounded"><a href="/careers" class="jsx-3112819368"><span class="jsx-3112819368 text-gray-700 text-lg mr-4 font-medium hidden md:inline-block">Careers</span></a><a href="https://medium.com/jina-ai" class="jsx-3112819368"><span class="jsx-3112819368 text-gray-700 text-lg mr-4 font-medium hidden md:inline-block">Blog</span></a><a href="https://learn.jina.ai" class="jsx-3112819368"><span class="jsx-3112819368 text-gray-700 text-lg mr-4 font-medium hidden md:inline-block">Learn</span></a><div class="jsx-3112819368 relative hidden md:block"><button class="jsx-3112819368 flex items-center"><span class="jsx-3112819368 text-gray-700 text-lg font-medium">Docs</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="jsx-3112819368 text-gray-700 h-5 w-5 group-hover:text-gray-500"><path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" class="jsx-3112819368"></path></svg></button></div><div class="jsx-3128403005 md:hidden overflow-y-scroll"><ul class="jsx-3128403005 dropdown"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/careers" rel="noopener noreferrer" class="jsx-3128403005 py-2 px-4 whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><a href="/careers" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Careers</span></a></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="https://medium.com/jina-ai" rel="noopener noreferrer" class="jsx-3128403005 py-2 px-4 whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><a href="https://medium.com/jina-ai" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Blog</span></a></div><span class="jsx-3128403005 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="https://learn.jina.ai" rel="noopener noreferrer" class="jsx-3128403005 py-2 px-4 whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/docs-icon.svg" alt="docs icon" class="w-full h-full"/></div><a href="https://learn.jina.ai" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Learn</span></a></div><span class="jsx-3128403005 text-xs text-gray-500">Jina Learning Bootcamp</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><div class="jsx-3128403005 py-2 px-4 whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/documentation-icon.svg" alt="documentation icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Docs</span></div><span class="jsx-3128403005 text-xs text-gray-500">Open-source Ecosystem product documentation</span></div><div class="jsx-3128403005 grid grid-cols-2 gap-y-4 gap-x-8 mt-1"><a href="https://docarray.jina.ai/" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-xs whitespace-nowrap">DocArray</span></a><a href="https://docs.jina.ai/" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-xs whitespace-nowrap">Jina</span></a><a href="https://docs.jina.ai/fundamentals/executor/hub/" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-xs whitespace-nowrap">Hub</span></a><a href="https://finetuner.jina.ai/" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-xs whitespace-nowrap">Finetuner</span></a><a href="https://clip-as-service.jina.ai/" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-xs whitespace-nowrap">CLIP-as-service</span></a><a href="https://now.jina.ai/" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-xs whitespace-nowrap">NOW</span></a></div></div></li></ul></div></ul></nav></div></div></div><div style="margin-top:5.5rem"><div class="min-h-screen"><main><div class="container mx-auto px-5 flex flex-col items-center"><img src="/assets/images/blog/2021-01-19_Duplicate_image_detection/cover.png" alt="Duplicate Image Detection-image" class="rounded-lg md:rounded-none shadow-md md:shadow-lg mb-4 mt-8 md:my-0 w-full xl:rounded-b-3xl"/><article class="mb-16 md:mb-32 pt-5 pb-10 md:py-20 md:max-w-6xl rounded-b-lg xl:rounded-3xl md:px-32 w-full xl:-mt-20 bg-white md:shadow-lg"><div class="mb-3"><div class="inline-block px-2 py-0 rounded text-primary-500 bg-primary-500 bg-opacity-20 mr-2 mb-2">image</div><div class="inline-block px-2 py-0 rounded text-primary-500 bg-primary-500 bg-opacity-20 mr-2 mb-2">search</div></div><h1 class="text-xl md:text-4xl font-bold tracking-tighter leading-tight md:leading-none mb-6 md:text-left">Duplicate Image Detection</h1><div class="flex items-center justify-between text-gray-600 mb-12"><div class="flex items-center"><img src="/assets/images/team/avatar-default.svg" class="w-8 h-auto rounded-full border border-gray-500 mr-4" alt="Mohammad Kalim, Shubham Saboo"/><div class="text-gray-600">Mohammad Kalim, Shubham Saboo</div></div><time dateTime="2022-01-22">22 Jan, 2022</time></div><div class="mx-auto markdown"><h2 id="background">Background</h2>
<p>When working with neural networks, training deep learning models on a self-curated image dataset could be risky and severely affect model performance. If the image dataset is built by scraping Google Images, Bing, etc., or by combining existing datasets, chances are that it could contain duplicate images. The risk posed by this can be summarized as follows:</p>
<ul>
<li>It introduces bias into the curated dataset, allowing the deep learning models to learn the patterns specific to duplicate images.</li>
<li>As the learning becomes more specific, the deep learning model's ability to generalize to new images decreases.</li>
</ul>
<p>Removing duplicate images manually is a tedious process. Let's say you have millions of images, then manually inspecting and removing them is  quite time-consuming. We can use comparable hashing techniques to automatically detect and remove duplicate or very similar images from our curated dataset to overcome this.</p>
<h3 id="why-comparable-hashing">Why comparable hashing?</h3>
<p>There are many hashing algorithms that you can use to find duplicates, but few of them will be able to find similar images. Therefore, we need a hash function that produces an identical hash for minor changes to the file, or rather one that is as similar as possible. This will help detect the duplicates and very similar images, which could vary in brightness, contrast, grayscale, watermark, etc.</p>
<h2 id="introduction">Introduction</h2>
<p>Hashing is a technique to transform any data into a shorter fixed-length value or unique key for that particular data. Cryptographic hash functions like MD5 and SHA-1 generate random hash values and act as a random seed. The same data will generate the same result, but different data will produce different results. Comparing two SHA1 hash values tells you two things: If the hashes are different, then the data is different. And if the hashes are the same, then the data is likely the same.</p>
<!-- <script src="https://gist.github.com/nan-wang/e4a872ec40803eabbbcc6618a4eccb1d.js"></script> -->
<blockquote>
<p><strong>Note</strong>: When applying this hash function to two similar images which differ by just one byte, hash values can be very different.</p>
</blockquote>
<p>On the other hand, comparable hashes are different in the sense that they can be compared, making it possible to compare two data points. All comparable hashes have the same basic properties: differently scaled images, varied different aspect ratios, minor coloring differences (like contrast, brightness, etc.), yet they can still be compared and matched.</p>
<h2 id="overview">Overview</h2>
<p>We'll look at four different hashing algorithms for duplicate/similar image detection, available in the <a href="https://github.com/JohannesBuchner/imagehash">ImageHash</a> Python library.</p>
<ol>
<li>
<p><strong>Average Hash (aHash)</strong>: Crushes the image into a grayscale 8x8 image and sets the 64 bits in the hash based on whether the pixel's value is greater than the average color for the image. In general, aHash is fast but not very accurate (high false positive).</p>
</li>
<li>
<p><strong>Perceptual Hash (pHash)</strong>: Similar to aHash, but instead of averaging, it relies on <a href="https://en.wikipedia.org/wiki/Discrete_cosine_transform">discrete cosine transformation</a> (DCT) and compares based on frequencies rather than color values. pHash is accurate (less false positives) but not very fast.</p>
</li>
<li>
<p><strong>Difference Hash (dHash)</strong>: Uses the same approach as aHash, but instead of using information about average or mean color values, it uses gradients (the difference between adjacent pixels). The dHash algorithm has all the speed of aHash with very few false positives</p>
</li>
<li>
<p><strong>Wavelet Hash (wHash)</strong>: Very similar to pHash, but instead of DCT it uses discrete <a href="https://en.wikipedia.org/wiki/Wavelet_transform">wavelet transformation</a>. wHash is faster than pHash and more accurate (fewer false positives).</p>
</li>
</ol>
<p>You can find a more detailed evaluation of different comparable hashing algorithms <a href="https://content-blockchain.org/research/testing-different-image-hash-functions/">here</a></p>
<h2 id="duplicatesimilar-image-detection-using-jina">Duplicate/Similar image detection using Jina</h2>
<p>You can easily build duplicate image detection using Jina. The <a href="link">ImageHasher Executor</a> implements comparable hashing and is available at Jina Hub. We'll create a Flow for indexing the Documents in the code below. The Document containing images is encoded into hashes using any of the above four techniques and stored with <a href="https://hub.jina.ai/executor/zb38xlt4">SimpleIndexer</a>.</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> jina <span class="hljs-keyword">import</span> Document, DocumentArray, Flow
 
<span class="hljs-comment"># Creating a DocumentArray object</span>
docs_index = DocumentArray.from_files(<span class="hljs-string">'index/*'</span>)
docs_index = [doc.load_uri_to_image_blob() <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> docs_index]
 
<span class="hljs-comment"># Creating the indexing flow with ImageHasher and SimpleIndexer</span>
flow = (
   Flow()
   .add(uses=<span class="hljs-string">'jinahub://ImageHasher'</span>, uses_metas={<span class="hljs-string">'hash_type'</span>: <span class="hljs-string">'dhash'</span>})
   .add(
       uses=<span class="hljs-string">'jinahub://SimpleIndexer'</span>,
       uses_metas={<span class="hljs-string">'workspace'</span>: <span class="hljs-string">'workspace'</span>},
       uses_with={
           <span class="hljs-string">'match_args'</span>: {<span class="hljs-string">'limit'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'metric'</span>: <span class="hljs-string">'euclidean'</span>, <span class="hljs-string">'use_scipy'</span>: <span class="hljs-literal">True</span>}
       },
   )
)
 
<span class="hljs-comment"># Indexing the Documents using the flow</span>
<span class="hljs-keyword">with</span> flow:
   flow.post(on=<span class="hljs-string">'/index'</span>, inputs=docs_index)

</code></pre>
<p>Now we can query with any new Document to find the matching Documents in the indexed data:</p>
<pre><code class="hljs language-python">
docs_query = DocumentArray.from_files(<span class="hljs-string">'query/*'</span>)
docs_query = [doc.load_uri_to_image_blob() <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> docs_query]
 
<span class="hljs-comment"># Using the same flow as above to find matches</span>
<span class="hljs-comment"># Opening the flow for incoming queries</span>
<span class="hljs-keyword">with</span> flow:
   flow.post(
       on=<span class="hljs-string">'/search'</span>,
       inputs= docs_query,
       on_done=print_matches,
   )


</code></pre>
<p>You can find the complete source code <a href="https://colab.research.google.com/drive/1ct2Gwclp7QdzGWlSwiMHrBG4sw1yn3ap?usp=sharing">here</a>.</p>
<h2 id="summary">Summary</h2>
<p>In this post, we saw how to use different hashing techniques to compare the similarity of images. The above hashing algorithms can precisely compare the slightest change in images using the hash values. With just a few lines of code, we also created a duplicate image detection application using Jina. Using these learnings, you can curate your dataset involving images to train deep learning models for your specific use case.</p>
<p>Stay tuned for more updates and happy searching!</p>
<h2 id="reference">Reference:</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/998662/what-is-image-hashing-used-for">What is image hashing used for?</a></li>
<li><a href="https://towardsdatascience.com/finding-duplicate-images-with-python-71c04ec8051">Finding duplicate images with Python</a></li>
<li><a href="https://medium.com/@somilshah112/how-to-find-duplicate-or-similar-images-quickly-with-python-2d636af9452f">How to find duplicate or similar images quickly with Python</a></li>
<li><a href="http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html">Perpetual hash algorithm</a></li>
</ul></div></article></div></main></div></div><div class="jsx-1956813867"><div class="bg-primary-500 text-white"><div class="jsx-1956813867 flex flex-row justify-center md:justify-between px-6 md:px-0"><div class="jsx-1956813867 footer-left-margin hidden md:block"></div><div class="jsx-1956813867 flex justify-center flex-col md:flex-row"><div class="jsx-1956813867 pr-4 md:ml-0 md:py-16 md:mr-2 lg:mr-16 mt-16 md:mt-0"><div class="text-center md:text-left"><div class="flex md:justify-start"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo-white.svg" alt="Jina.ai logo" class="w-24"/></div></div></div></div><div class="jsx-1956813867 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-16 py-16"><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Company</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/careers/">Join us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://medium.com/jina-ai">Blog</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://learn.jina.ai">Learn</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Products</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/jina">Jina</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://hub.jina.ai">Hub</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/finetuner">Finetuner</a></li><li class="jsx-1956813867"><a class="jsx-1956813867 text-white" href="https://github.com/jina-ai/docarray">DocArray</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Legal</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/legal/#terms-of-service">Terms of Service</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/legal/#privacy-policy">Privacy Policy</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Social</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/">GitHub</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://www.linkedin.com/company/jinaai/">LinkedIn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://twitter.com/jinaAI_/">Twitter</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://www.youtube.com/c/JinaAI/">YouTube</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://slack.jina.ai/">Slack</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://meetup.com/jina-community-meetup/">Meetup</a></li></ul></nav></div></div></div><div class="jsx-1956813867 footer-right-margin hidden md:block"></div></div><div class="text-center text-gray-100 text-sm py-2"><span class="block md:inline-block">© Jina AI 2020-2022. All rights reserved.</span></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Duplicate Image Detection","description":"In this blog post, we'll build a duplicate image detection system using Jina Hub's ImageHasher Executor","date":"2022-01-22","slug":"2022-01-19_Duplicate_image_detection","author":"Mohammad Kalim, Shubham Saboo","content":"\u003ch2 id=\"background\"\u003eBackground\u003c/h2\u003e\n\u003cp\u003eWhen working with neural networks, training deep learning models on a self-curated image dataset could be risky and severely affect model performance. If the image dataset is built by scraping Google Images, Bing, etc., or by combining existing datasets, chances are that it could contain duplicate images. The risk posed by this can be summarized as follows:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIt introduces bias into the curated dataset, allowing the deep learning models to learn the patterns specific to duplicate images.\u003c/li\u003e\n\u003cli\u003eAs the learning becomes more specific, the deep learning model's ability to generalize to new images decreases.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eRemoving duplicate images manually is a tedious process. Let's say you have millions of images, then manually inspecting and removing them is  quite time-consuming. We can use comparable hashing techniques to automatically detect and remove duplicate or very similar images from our curated dataset to overcome this.\u003c/p\u003e\n\u003ch3 id=\"why-comparable-hashing\"\u003eWhy comparable hashing?\u003c/h3\u003e\n\u003cp\u003eThere are many hashing algorithms that you can use to find duplicates, but few of them will be able to find similar images. Therefore, we need a hash function that produces an identical hash for minor changes to the file, or rather one that is as similar as possible. This will help detect the duplicates and very similar images, which could vary in brightness, contrast, grayscale, watermark, etc.\u003c/p\u003e\n\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eHashing is a technique to transform any data into a shorter fixed-length value or unique key for that particular data. Cryptographic hash functions like MD5 and SHA-1 generate random hash values and act as a random seed. The same data will generate the same result, but different data will produce different results. Comparing two SHA1 hash values tells you two things: If the hashes are different, then the data is different. And if the hashes are the same, then the data is likely the same.\u003c/p\u003e\n\u003c!-- \u003cscript src=\"https://gist.github.com/nan-wang/e4a872ec40803eabbbcc6618a4eccb1d.js\"\u003e\u003c/script\u003e --\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eNote\u003c/strong\u003e: When applying this hash function to two similar images which differ by just one byte, hash values can be very different.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eOn the other hand, comparable hashes are different in the sense that they can be compared, making it possible to compare two data points. All comparable hashes have the same basic properties: differently scaled images, varied different aspect ratios, minor coloring differences (like contrast, brightness, etc.), yet they can still be compared and matched.\u003c/p\u003e\n\u003ch2 id=\"overview\"\u003eOverview\u003c/h2\u003e\n\u003cp\u003eWe'll look at four different hashing algorithms for duplicate/similar image detection, available in the \u003ca href=\"https://github.com/JohannesBuchner/imagehash\"\u003eImageHash\u003c/a\u003e Python library.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eAverage Hash (aHash)\u003c/strong\u003e: Crushes the image into a grayscale 8x8 image and sets the 64 bits in the hash based on whether the pixel's value is greater than the average color for the image. In general, aHash is fast but not very accurate (high false positive).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003ePerceptual Hash (pHash)\u003c/strong\u003e: Similar to aHash, but instead of averaging, it relies on \u003ca href=\"https://en.wikipedia.org/wiki/Discrete_cosine_transform\"\u003ediscrete cosine transformation\u003c/a\u003e (DCT) and compares based on frequencies rather than color values. pHash is accurate (less false positives) but not very fast.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eDifference Hash (dHash)\u003c/strong\u003e: Uses the same approach as aHash, but instead of using information about average or mean color values, it uses gradients (the difference between adjacent pixels). The dHash algorithm has all the speed of aHash with very few false positives\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eWavelet Hash (wHash)\u003c/strong\u003e: Very similar to pHash, but instead of DCT it uses discrete \u003ca href=\"https://en.wikipedia.org/wiki/Wavelet_transform\"\u003ewavelet transformation\u003c/a\u003e. wHash is faster than pHash and more accurate (fewer false positives).\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eYou can find a more detailed evaluation of different comparable hashing algorithms \u003ca href=\"https://content-blockchain.org/research/testing-different-image-hash-functions/\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"duplicatesimilar-image-detection-using-jina\"\u003eDuplicate/Similar image detection using Jina\u003c/h2\u003e\n\u003cp\u003eYou can easily build duplicate image detection using Jina. The \u003ca href=\"link\"\u003eImageHasher Executor\u003c/a\u003e implements comparable hashing and is available at Jina Hub. We'll create a Flow for indexing the Documents in the code below. The Document containing images is encoded into hashes using any of the above four techniques and stored with \u003ca href=\"https://hub.jina.ai/executor/zb38xlt4\"\u003eSimpleIndexer\u003c/a\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e jina \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Document, DocumentArray, Flow\n \n\u003cspan class=\"hljs-comment\"\u003e# Creating a DocumentArray object\u003c/span\u003e\ndocs_index = DocumentArray.from_files(\u003cspan class=\"hljs-string\"\u003e'index/*'\u003c/span\u003e)\ndocs_index = [doc.load_uri_to_image_blob() \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e doc \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e docs_index]\n \n\u003cspan class=\"hljs-comment\"\u003e# Creating the indexing flow with ImageHasher and SimpleIndexer\u003c/span\u003e\nflow = (\n   Flow()\n   .add(uses=\u003cspan class=\"hljs-string\"\u003e'jinahub://ImageHasher'\u003c/span\u003e, uses_metas={\u003cspan class=\"hljs-string\"\u003e'hash_type'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'dhash'\u003c/span\u003e})\n   .add(\n       uses=\u003cspan class=\"hljs-string\"\u003e'jinahub://SimpleIndexer'\u003c/span\u003e,\n       uses_metas={\u003cspan class=\"hljs-string\"\u003e'workspace'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'workspace'\u003c/span\u003e},\n       uses_with={\n           \u003cspan class=\"hljs-string\"\u003e'match_args'\u003c/span\u003e: {\u003cspan class=\"hljs-string\"\u003e'limit'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'metric'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'euclidean'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'use_scipy'\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003eTrue\u003c/span\u003e}\n       },\n   )\n)\n \n\u003cspan class=\"hljs-comment\"\u003e# Indexing the Documents using the flow\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e flow:\n   flow.post(on=\u003cspan class=\"hljs-string\"\u003e'/index'\u003c/span\u003e, inputs=docs_index)\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow we can query with any new Document to find the matching Documents in the indexed data:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\ndocs_query = DocumentArray.from_files(\u003cspan class=\"hljs-string\"\u003e'query/*'\u003c/span\u003e)\ndocs_query = [doc.load_uri_to_image_blob() \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e doc \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e docs_query]\n \n\u003cspan class=\"hljs-comment\"\u003e# Using the same flow as above to find matches\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# Opening the flow for incoming queries\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e flow:\n   flow.post(\n       on=\u003cspan class=\"hljs-string\"\u003e'/search'\u003c/span\u003e,\n       inputs= docs_query,\n       on_done=print_matches,\n   )\n\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou can find the complete source code \u003ca href=\"https://colab.research.google.com/drive/1ct2Gwclp7QdzGWlSwiMHrBG4sw1yn3ap?usp=sharing\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"summary\"\u003eSummary\u003c/h2\u003e\n\u003cp\u003eIn this post, we saw how to use different hashing techniques to compare the similarity of images. The above hashing algorithms can precisely compare the slightest change in images using the hash values. With just a few lines of code, we also created a duplicate image detection application using Jina. Using these learnings, you can curate your dataset involving images to train deep learning models for your specific use case.\u003c/p\u003e\n\u003cp\u003eStay tuned for more updates and happy searching!\u003c/p\u003e\n\u003ch2 id=\"reference\"\u003eReference:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://stackoverflow.com/questions/998662/what-is-image-hashing-used-for\"\u003eWhat is image hashing used for?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://towardsdatascience.com/finding-duplicate-images-with-python-71c04ec8051\"\u003eFinding duplicate images with Python\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/@somilshah112/how-to-find-duplicate-or-similar-images-quickly-with-python-2d636af9452f\"\u003eHow to find duplicate or similar images quickly with Python\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html\"\u003ePerpetual hash algorithm\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","coverImage":"/assets/images/blog/2021-01-19_Duplicate_image_detection/cover.png","tags":["image","search"],"sanitize":false,"gfm":true}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"2022-01-19_Duplicate_image_detection"},"buildId":"_xnhU9SqN4Cw45DMBNrgz","runtimeConfig":{},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>