<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" as="style" data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&amp;display=swap" data-optimized-fonts="true"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta property="og:title" content="Jina AI is a Neural Search Company"/><meta name="author" content="Jina AI"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Jina AI"/><meta property="og:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta property="og:type" content="website"/><meta property="og:description" content="We provide business and developers an opensource neural search ecosystem for understanding unstructured data faster and easier."/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta property="twitter:title" content="Jina AI is a Neural Search Company"/><meta property="twitter:description" content="We provide business and developers an opensource neural search ecosystem for understanding unstructured data faster and easier."/><meta name="twitter:site" content="@JinaAI_"/><meta name="twitter:creator" content="@JinaAI_"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-96x96.png"/><link rel="icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&amp;display=swap" data-optimized-fonts="true"/><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:url" content="https://jina.ai/"/><meta property="og:title" content="Jina AI | Jina AI is a Neural Search Company"/><meta property="og:description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:locale" content="en"/><meta property="og:site_name" content="Jina AI, Ltd"/><link rel="canonical" href="https://jina.ai/"/><title>The Implementation Journey of CRUD in Jina | Jina AI</title><meta name="next-head-count" content="33"/><link rel="preload" href="/_next/static/css/ec346583fec4e0e0c23d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ec346583fec4e0e0c23d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-f47d69457824065d04c3.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-18f21ab86863c15f7e5d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5e6bbd2a974b4a7955a3.js" defer=""></script><script src="/_next/static/chunks/419-4e2ec04e0cd626c3ac83.js" defer=""></script><script src="/_next/static/chunks/522-f41528aa8639e5478b36.js" defer=""></script><script src="/_next/static/chunks/100-3a8cb6004ce37f1c54f0.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-b044910cba761441deff.js" defer=""></script><script src="/_next/static/94a10v_Xcu5H6r-QimlHI/_buildManifest.js" defer=""></script><script src="/_next/static/94a10v_Xcu5H6r-QimlHI/_ssgManifest.js" defer=""></script><style id="__jsx-3128403005">.dropdown.jsx-3128403005{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:100%;border-radius:0.75rem;}.dropdown.jsx-3128403005>.jsx-3128403005:not([hidden])~.jsx-3128403005:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}</style><style id="__jsx-1573896879">.navbar.jsx-1573896879 a{display:inline-block;width:100%;}.navbar.jsx-1573896879 li:not(:first-child){margin-top:0.75rem;}.navbar.jsx-1573896879 a .btn{width:100%;}.navbar.jsx-1573896879 a:hover{--tw-text-opacity:1;color:rgba(0,129,129,var(--tw-text-opacity));}@media (min-width:640px){.navbar.jsx-1573896879 a,.navbar.jsx-1573896879 a .btn{width:auto;}.navbar.jsx-1573896879 li:not(:first-child){margin-top:0px;}.navbar.jsx-1573896879>li.jsx-1573896879:not(:last-child){margin-right:1.25rem;}}</style><style id="__jsx-649517993">.top-nav-bar.jsx-649517993{box-shadow:3px 6px 33px 0px #cdcdcd40;z-index:200;position:fixed;width:100vw;background:white;top:0;}</style><style id="__jsx-1324436386">.footer-links.jsx-1324436386 li{margin-top:0.25rem;}.footer-items-title.jsx-1324436386{font-size:1.375rem;line-height:1.5rem;-webkit-letter-spacing:0.22px;-moz-letter-spacing:0.22px;-ms-letter-spacing:0.22px;letter-spacing:0.22px;}</style><style id="__jsx-1956813867">.footer-left-margin.jsx-1956813867{width:20rem;height:inherit;background:no-repeat 40% 20%/30% url("/assets/images/planet-beige.svg");}.footer-right-margin.jsx-1956813867{width:16rem;height:inherit;background:no-repeat 10% 10%/50% url("/assets/images/planet-green.svg");}</style><style data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap">@font-face{font-family:'Poppins';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLFj_V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLDz8V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrFJM.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLGT9V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLFj_Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLFj_Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLFj_Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLDz8Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLDz8Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLDz8Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLGT9Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLGT9Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLGT9Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-164627626-2"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-164627626-2', {
              page_path: window.location.pathname,
            });
          </script><body><div id="__next"><div class="jsx-649517993 top-nav-bar"><div class="md:max-w-screen-lg lg:max-w-screen-xl mx-auto px-8 py-6 undefined"><div class="jsx-1573896879 flex flex-wrap justify-between items-center"><div class="jsx-1573896879"><a class="jsx-1573896879" href="/"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo.svg" alt="Jina.ai logo" class="w-24"/></div></a></div><div class="jsx-1573896879 md:hidden"><button type="button" aria-label="show menu" class="jsx-1573896879 p-3 text-gray-900 rounded-md hover:bg-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="jsx-1573896879 stroke-current h-6 w-6"><path d="M0 0h24v24H0z" stroke="none" class="jsx-1573896879"></path><path d="M4 6h16M4 12h16M4 18h16" class="jsx-1573896879"></path></svg></button></div><nav class="jsx-1573896879 w-full md:w-auto md:block mt-6 md:mt-0 hidden"><ul class="jsx-1573896879 navbar flex flex-col md:flex-row md:items-center font-medium text-xl text-gray-800 sm:p-0 bg-white sm:bg-transparent rounded"><a href="/careers" class="jsx-649517993"><span class="jsx-649517993 text-gray-700 text-lg mr-4 font-medium hidden md:inline-block">Careers</span></a><a href="/blog" class="jsx-649517993"><span class="jsx-649517993 text-gray-700 text-lg mr-4 font-medium hidden md:inline-block">Blog</span></a><a href="https://learn.jina.ai" class="jsx-649517993"><span class="jsx-649517993 text-gray-700 text-lg mr-4 font-medium hidden md:inline-block">Learn</span></a><div class="jsx-3128403005 md:hidden overflow-y-scroll"><ul class="jsx-3128403005 dropdown"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/careers" rel="noopener noreferrer" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><a href="/careers" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Careers</span></a></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/blog" rel="noopener noreferrer" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><a href="/blog" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Blog</span></a></div><span class="jsx-3128403005 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="https://learn.jina.ai" rel="noopener noreferrer" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/docs-icon.svg" alt="docs icon" class="w-full h-full"/></div><a href="https://learn.jina.ai" class="jsx-3128403005"><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Learn</span></a></div><span class="jsx-3128403005 text-xs text-gray-500">Jina Learning Bootcamp</span></div></a></li></ul></div></ul></nav></div></div></div><div style="margin-top:5.5rem"><div class="min-h-screen"><main><div class="container mx-auto px-5 flex flex-col items-center"><img src="/assets/images/blog/crud/crud_is_easy.jpg" alt="The Implementation Journey of CRUD in Jina-image" class="rounded-lg md:rounded-none shadow-md md:shadow-lg mb-4 mt-8 md:my-0 w-full xl:rounded-b-3xl"/><article class="mb-16 md:mb-32 pt-5 pb-10 md:py-20 md:max-w-6xl rounded-b-lg xl:rounded-3xl md:px-32 w-full xl:-mt-20 bg-white md:shadow-lg"><div class="mb-3"><div class="inline-block px-2 py-0 rounded text-primary-500 bg-primary-500 bg-opacity-20 mr-2 mb-2">crud</div><div class="inline-block px-2 py-0 rounded text-primary-500 bg-primary-500 bg-opacity-20 mr-2 mb-2">performance</div><div class="inline-block px-2 py-0 rounded text-primary-500 bg-primary-500 bg-opacity-20 mr-2 mb-2">design</div></div><h1 class="text-xl md:text-4xl font-bold tracking-tighter leading-tight md:leading-none mb-6 md:text-left">The Implementation Journey of CRUD in Jina</h1><div class="flex items-center justify-between text-gray-600 mb-12"><div class="flex items-center"><img src="/assets/images/team/avatar-default.svg" class="w-8 h-auto rounded-full border border-gray-500 mr-4" alt="Cristian Mitroi"/><div class="text-gray-600">Cristian Mitroi</div></div><time dateTime="2021-02-17T10:00:39.923Z">17 February, 2021</time></div><div class="mx-auto markdown"><p>We all know about CRUD <a id="user-content-footnote1-back" href="#footnote1">[1]</a>. Every app out there does it. It is essential to interact with the data those apps present to us after all. As a user, this all feels intuitive and expected. So implementing CRUD should be easy, right?</p>
<p>Answer, right off the bat: no. Answer, with a bit more nuance: <em>depending on the system</em>, no. Answer, in full this time: Jina is complex, so no.</p>
<p align="center" class="image-only">
<span class="image-wrapper"><img src="/assets/images/blog/crud/crud_is_easy.jpg" width="550"></span>
</p>
<p>Ok, I’m going to assume you have some questions now. Like: why is Jina so complex? What about that complexity makes it hard to implement CRUD? What specific challenges did you face? Did you make any compromises? This blog post is about answering these questions.</p>
<h2 id="user-content-the-vision-of-jina">The Vision of Jina</h2>
<p>We built Jina from the ground up with the vision of being _the _design pattern for neural search. As part of this, we prioritized adding and searching data. We made these operations our top priority in terms of ease of use and performance. These are the core operations in Jina.</p>
<h2 id="user-content-the-unidirectional-flow">The unidirectional Flow</h2>
<p>However, like any design decision in software development, everything is a compromise. At the time, we were focusing on building up Jina and were not considering the complications arising from specific future features.</p>
<p>This is what happened in November 2020, when we had started to focus on building the Update and Delete operations. Piece by piece, we were tracking down what components in our system would be problematic for this feature. We realized that it would be quite a few. Good thing we had tests.</p>
<p align="center" class="image-only">
<span class="image-wrapper"><img src="/assets/images/blog/crud/tests.png" width="550"></span>
</p>
<p>One of the key elements that made the process hard was our unidirectional Flow. In order to be as efficient and scalable as possible, the Flow in Jina only processes your requests in one direction. This means that the system can be easily scaled horizontally, by adding machines with replicas and parallelization. It also keeps the design clean, without the danger of circular calls between Pods.</p>
<p>However, this proves difficult in the context of Update and Delete. When you update a Document that has child Documents (as result of segmentation), you will need to first delete the old chunks yourself. Then you can send the new Document, and the new chunks will be created from that. If that Flow had been bidirectional, it would have been able to send a request back through its Pods to delete the specific IDs of the chunks. However, this would have led to possible endless loop problems.</p>
<h2 id="user-content-indexers-and-mmap">Indexers and <code>mmap</code></h2>
<p>Another key element in Jina is our Indexers. We have written the code to be very efficient for indexing and querying. We wrote the classes to actually use <code>mmap</code> to map it to a file on the disk. We chose this in order to reduce RAM usage. However, this performance did come at the cost of flexibility. When adapting these classes to support Update and Delete, we noticed that it would be very inefficient to do an actual Update and Delete in the data structure itself. That would mean loading it all into RAM, editing it, and then writing it back… which would ruin the entire point of the initial performance design.</p>
<p align="center" class="image-only">
<span class="image-wrapper"><img src="/assets/images/blog/crud/performance.png" width="550"></span>
</p>
<p>Thus we had to design a solution that would <em>mask</em> the old entries in order for them to be considered deleted. For updates, we would then insert the same ID with the new updated contents. This is not a perfect solution. Users need to rebuild their indices regularly, since they would be growing in size due to the old data still being stored (just unreachable).</p>
<h2 id="user-content-conclusion">Conclusion</h2>
<p><strong>TL;DR</strong>: Important to bear in mind that Jina is <strong>not</strong> a database engine. While we support some operations that databases usually exhibit, our main focus is on making Jina performant, reliable, and scalable for <strong>search</strong>. Traditional database engines are optimized for CRUD specifically. It’s a matter of design goals.</p>
<h2 id="user-content-footnotes">Footnotes</h2>
<p id="user-content-footnote1">1. CRUD is the acronym for the basic operations in interacting with data in a system: Create, Read, Update, Delete. <a href="#footnote1-back">Back</a></p> </div></article></div></main></div></div><div class="jsx-1956813867"><div class="bg-primary-500 text-white"><div class="jsx-1956813867 flex flex-row justify-center md:justify-between px-6 md:px-0"><div class="jsx-1956813867 footer-left-margin hidden md:block"></div><div class="jsx-1956813867 flex justify-center flex-col md:flex-row"><div class="jsx-1956813867 pr-4 md:ml-0 md:py-16 md:mr-2 lg:mr-16 mt-16 md:mt-0"><div class="text-center md:text-left"><div class="flex md:justify-start"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo-white.svg" alt="Jina.ai logo" class="w-24"/></div></div></div></div><div class="jsx-1956813867 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-16 py-16"><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Company</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/careers/">Join us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/blog/">Blog</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://learn.jina.ai">Learn</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Products</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/jina">Jina</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://hub.jina.ai">Hub</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/finetuner">Finetuner</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Legal</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/legal/#terms-of-service">Terms of Service</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/legal/#privacy-policy">Privacy Policy</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Social</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/">GitHub</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://www.linkedin.com/company/jinaai/">LinkedIn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://twitter.com/jinaAI_/">Twitter</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://www.youtube.com/c/JinaAI/">YouTube</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://slack.jina.ai/">Slack</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://meetup.com/jina-community-meetup/">Meetup</a></li></ul></nav></div></div></div><div class="jsx-1956813867 footer-right-margin hidden md:block"></div></div><div class="text-center text-gray-100 text-sm py-2"><span class="block md:inline-block">© Jina AI 2020-2022. All rights reserved.</span></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"The Implementation Journey of CRUD in Jina","date":"2021-02-17T10:00:39.923Z","slug":"crud-jina","author":"Cristian Mitroi","avatar":"/assets/images/team/Christian.svg","content":"\u003cp\u003eWe all know about CRUD \u003ca id=\"user-content-footnote1-back\" href=\"#footnote1\"\u003e[1]\u003c/a\u003e. Every app out there does it. It is essential to interact with the data those apps present to us after all. As a user, this all feels intuitive and expected. So implementing CRUD should be easy, right?\u003c/p\u003e\n\u003cp\u003eAnswer, right off the bat: no. Answer, with a bit more nuance: \u003cem\u003edepending on the system\u003c/em\u003e, no. Answer, in full this time: Jina is complex, so no.\u003c/p\u003e\n\u003cp align=\"center\" class=\"image-only\"\u003e\n\u003cspan class=\"image-wrapper\"\u003e\u003cimg src=\"/assets/images/blog/crud/crud_is_easy.jpg\" width=\"550\"\u003e\u003c/span\u003e\n\u003c/p\u003e\n\u003cp\u003eOk, I’m going to assume you have some questions now. Like: why is Jina so complex? What about that complexity makes it hard to implement CRUD? What specific challenges did you face? Did you make any compromises? This blog post is about answering these questions.\u003c/p\u003e\n\u003ch2 id=\"user-content-the-vision-of-jina\"\u003eThe Vision of Jina\u003c/h2\u003e\n\u003cp\u003eWe built Jina from the ground up with the vision of being _the _design pattern for neural search. As part of this, we prioritized adding and searching data. We made these operations our top priority in terms of ease of use and performance. These are the core operations in Jina.\u003c/p\u003e\n\u003ch2 id=\"user-content-the-unidirectional-flow\"\u003eThe unidirectional Flow\u003c/h2\u003e\n\u003cp\u003eHowever, like any design decision in software development, everything is a compromise. At the time, we were focusing on building up Jina and were not considering the complications arising from specific future features.\u003c/p\u003e\n\u003cp\u003eThis is what happened in November 2020, when we had started to focus on building the Update and Delete operations. Piece by piece, we were tracking down what components in our system would be problematic for this feature. We realized that it would be quite a few. Good thing we had tests.\u003c/p\u003e\n\u003cp align=\"center\" class=\"image-only\"\u003e\n\u003cspan class=\"image-wrapper\"\u003e\u003cimg src=\"/assets/images/blog/crud/tests.png\" width=\"550\"\u003e\u003c/span\u003e\n\u003c/p\u003e\n\u003cp\u003eOne of the key elements that made the process hard was our unidirectional Flow. In order to be as efficient and scalable as possible, the Flow in Jina only processes your requests in one direction. This means that the system can be easily scaled horizontally, by adding machines with replicas and parallelization. It also keeps the design clean, without the danger of circular calls between Pods.\u003c/p\u003e\n\u003cp\u003eHowever, this proves difficult in the context of Update and Delete. When you update a Document that has child Documents (as result of segmentation), you will need to first delete the old chunks yourself. Then you can send the new Document, and the new chunks will be created from that. If that Flow had been bidirectional, it would have been able to send a request back through its Pods to delete the specific IDs of the chunks. However, this would have led to possible endless loop problems.\u003c/p\u003e\n\u003ch2 id=\"user-content-indexers-and-mmap\"\u003eIndexers and \u003ccode\u003emmap\u003c/code\u003e\u003c/h2\u003e\n\u003cp\u003eAnother key element in Jina is our Indexers. We have written the code to be very efficient for indexing and querying. We wrote the classes to actually use \u003ccode\u003emmap\u003c/code\u003e to map it to a file on the disk. We chose this in order to reduce RAM usage. However, this performance did come at the cost of flexibility. When adapting these classes to support Update and Delete, we noticed that it would be very inefficient to do an actual Update and Delete in the data structure itself. That would mean loading it all into RAM, editing it, and then writing it back… which would ruin the entire point of the initial performance design.\u003c/p\u003e\n\u003cp align=\"center\" class=\"image-only\"\u003e\n\u003cspan class=\"image-wrapper\"\u003e\u003cimg src=\"/assets/images/blog/crud/performance.png\" width=\"550\"\u003e\u003c/span\u003e\n\u003c/p\u003e\n\u003cp\u003eThus we had to design a solution that would \u003cem\u003emask\u003c/em\u003e the old entries in order for them to be considered deleted. For updates, we would then insert the same ID with the new updated contents. This is not a perfect solution. Users need to rebuild their indices regularly, since they would be growing in size due to the old data still being stored (just unreachable).\u003c/p\u003e\n\u003ch2 id=\"user-content-conclusion\"\u003eConclusion\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eTL;DR\u003c/strong\u003e: Important to bear in mind that Jina is \u003cstrong\u003enot\u003c/strong\u003e a database engine. While we support some operations that databases usually exhibit, our main focus is on making Jina performant, reliable, and scalable for \u003cstrong\u003esearch\u003c/strong\u003e. Traditional database engines are optimized for CRUD specifically. It’s a matter of design goals.\u003c/p\u003e\n\u003ch2 id=\"user-content-footnotes\"\u003eFootnotes\u003c/h2\u003e\n\u003cp id=\"user-content-footnote1\"\u003e1. CRUD is the acronym for the basic operations in interacting with data in a system: Create, Read, Update, Delete. \u003ca href=\"#footnote1-back\"\u003eBack\u003c/a\u003e\u003c/p\u003e ","coverImage":"/assets/images/blog/crud/crud_is_easy.jpg","tags":["crud","performance","design"]}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"crud-jina"},"buildId":"94a10v_Xcu5H6r-QimlHI","runtimeConfig":{},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>