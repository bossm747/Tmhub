<!DOCTYPE html><html lang="en"><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta property="og:title" content="Jina AI - a Neural Search Company"/><meta name="author" content="Jina AI"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Jina AI"/><meta property="og:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta name="twitter:card" content="summary"/><meta property="twitter:image" content="https://jina.ai/assets/images/jina_banner_new.png"/><meta property="twitter:title" content="Jina AI - a Neural Search Company"/><meta name="twitter:site" content="@JinaAI_"/><meta name="twitter:creator" content="@Jina AI"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-96x96.png"/><link rel="icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700"/><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:url" content="https://jina.ai/"/><meta property="og:title" content="Jina AI | Jina AI is a Neural Search Company"/><meta property="og:description" content="Open source neural search ecosystem for businesses and developers, allowing anyone to search any kind of data with high availability and scalability."/><meta property="og:locale" content="en"/><meta property="og:site_name" content="Jina AI, Ltd"/><link rel="canonical" href="https://jina.ai/"/><title>Tutorial: A deep-dive with Executors | Jina AI</title><meta name="next-head-count" content="29"/><link rel="preload" href="/_next/static/css/0f799b14a4ed4474ac43.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0f799b14a4ed4474ac43.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-252cf839dc8f20f713fa.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-94f262366e752bd48d82.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons-4667b98b62a60d7c050b.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-9a4182dc8e7736869bf9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-c979da4c9387172560cc.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-13cdde2fb793b77184ee.js" as="script"/><link rel="preload" href="/_next/static/chunks/522-e45333ebcf36799b860c.js" as="script"/><link rel="preload" href="/_next/static/chunks/373-350caaa5387e56e8b807.js" as="script"/><link rel="preload" href="/_next/static/chunks/93-f751efe1c02a3f02132d.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-c7b4bf8c8caf846516d2.js" as="script"/><style id="__jsx-3792957869">.dropdown.jsx-3792957869{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));padding:1.5rem;--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:24rem;border-radius:0.75rem;}.dropdown.jsx-3792957869>.jsx-3792957869:not([hidden])~.jsx-3792957869:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}.dropdown.jsx-3792957869{box-shadow:3px 6px 33px rgba(205,205,205,0.25);}</style><style id="__jsx-3128403005">.dropdown.jsx-3128403005{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(74,85,104,var(--tw-text-opacity));top:5rem;width:100%;border-radius:0.75rem;}.dropdown.jsx-3128403005>.jsx-3128403005:not([hidden])~.jsx-3128403005:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-style:solid;--tw-divide-opacity:1;border-color:rgba(235,235,235,var(--tw-divide-opacity));}</style><style id="__jsx-3949856645">.btn.jsx-3949856645{text-align:center;}.btn-base.jsx-3949856645{font-size:1.125rem;font-weight:600;}.btn-xl.jsx-3949856645{padding-top:1rem;padding-bottom:1rem;padding-left:1.5rem;padding-right:1.5rem;font-size:1.25rem;font-weight:800;}.btn-full-rounded.jsx-3949856645{border-radius:9999px;}.btn-primary.jsx-3949856645{border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(0,129,129,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity));}.btn-primary.jsx-3949856645:hover{background-color:#009191;}.btn-secondary.jsx-3949856645{--tw-bg-opacity:1;background-color:rgba(251,203,103,var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity));}.btn-secondary.jsx-3949856645:hover{background-color:#fbd076;}.btn-tertiary.jsx-3949856645{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));border:1px solid #999999;}.btn-tertiary.jsx-3949856645:hover{background-color:#f6f6f6;}.btn-outlined.jsx-3949856645{border-width:2px;border-style:solid;--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity));background-color:transparent;}.btn-outlined.jsx-3949856645:hover{background-color:#f6f6f622;}</style><style id="__jsx-223001487">.navbar.jsx-223001487 a{display:inline-block;width:100%;}.navbar.jsx-223001487 li:not(:first-child){margin-top:0.75rem;}.navbar.jsx-223001487 a .btn{width:100%;}.navbar.jsx-223001487 a:hover{--tw-text-opacity:1;color:rgba(0,129,129,var(--tw-text-opacity));}@media (min-width:640px){.navbar.jsx-223001487 a,.navbar.jsx-223001487 a .btn{width:auto;}.navbar.jsx-223001487 li:not(:first-child){margin-top:0px;}.navbar.jsx-223001487>(li:not(:last-child)){margin-right:1.25rem;}}</style><style id="__jsx-649517993">.top-nav-bar.jsx-649517993{box-shadow:3px 6px 33px 0px #cdcdcd40;z-index:200;position:fixed;width:100vw;background:white;top:0;}</style><style id="__jsx-4055754880">.markdown.jsx-4055754880{font-size:1.125rem;line-height:1.625;}.markdown.jsx-4055754880 p.jsx-4055754880,.markdown.jsx-4055754880 ul.jsx-4055754880,.markdown.jsx-4055754880 ol.jsx-4055754880,.markdown.jsx-4055754880 blockquote.jsx-4055754880{margin-top:1.5rem;margin-bottom:1.5rem;}.markdown.jsx-4055754880 h2.jsx-4055754880{margin-top:3rem;margin-bottom:1rem;font-size:1.875rem;line-height:1.375;}.markdown.jsx-4055754880 h3.jsx-4055754880{margin-top:2rem;margin-bottom:1rem;font-size:1.5rem;line-height:1.375;}</style><style id="__jsx-1324436386">.footer-links.jsx-1324436386 li{margin-top:0.25rem;}.footer-items-title.jsx-1324436386{font-size:1.375rem;line-height:1.5rem;-webkit-letter-spacing:0.22px;-moz-letter-spacing:0.22px;-ms-letter-spacing:0.22px;letter-spacing:0.22px;}</style><style id="__jsx-1956813867">.footer-left-margin.jsx-1956813867{width:20rem;height:inherit;background:no-repeat 40% 20% / 30% url('/assets/images/planet-beige.svg');}.footer-right-margin.jsx-1956813867{width:16rem;height:inherit;background:no-repeat 10% 10% / 50% url('/assets/images/planet-green.svg');}</style><style data-href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700">@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrFJM.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7V1g.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLEj6Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z11lFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1JlFd2JQEl8qw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/poppins/v15/pxiByp8kv8JHgFVrLCz7Z1xlFd2JQEk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><script async="" src="https://www.googletagmanager.com/gtag/js?id=undefined"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'undefined', {
              page_path: window.location.pathname,
            });
          </script><body><div id="__next"><div class="jsx-649517993 top-nav-bar"><div class="md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-2xl mx-auto px-3 py-6 undefined"><div class="jsx-223001487 flex flex-wrap justify-between items-center"><div class="jsx-223001487"><a class="jsx-223001487" href="/"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo.svg" alt="Jina.ai logo" class="w-24"/></div></a></div><div class="jsx-223001487 sm:hidden"><button type="button" aria-label="show menu" class="jsx-223001487 p-3 text-gray-900 rounded-md hover:bg-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="jsx-223001487 stroke-current h-6 w-6"><path d="M0 0h24v24H0z" stroke="none" class="jsx-223001487"></path><path d="M4 6h16M4 12h16M4 18h16" class="jsx-223001487"></path></svg></button></div><nav class="jsx-223001487 w-full sm:w-auto sm:block mt-2 sm:mt-0 hidden"><ul class="jsx-223001487 navbar flex flex-col sm:flex-row sm:items-center font-medium text-xl text-gray-800 pt-3 pb-5 px-5 sm:p-0 bg-white sm:bg-transparent rounded"><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Products dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Products</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/core" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/core-icon.svg" alt="core icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Jina Core</span></div><span class="jsx-3792957869 text-xs text-gray-500">An open-source framework for building multimedia search applications.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/hub" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/hub-icon.svg" alt="hub icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Jina Hub</span></div><span class="jsx-3792957869 text-xs text-gray-500">Jina’s community-driven module marketplace for building your Flow</span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Developers dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Developers</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/contribute" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/contribute-icon.svg" alt="contribute icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Contribute</span></div><span class="jsx-3792957869 text-xs text-gray-500">Want to shape the future of neural search? Find out how you can contribute to Jina here.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/join" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/join-icon.svg" alt="join icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Join</span></div><span class="jsx-3792957869 text-xs text-gray-500">Join the Jina Slack community to meet the team and get support.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/learn" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/learn-icon.svg" alt="learn icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Learn</span></div><span class="jsx-3792957869 text-xs text-gray-500">Docs, tutorials and examples for developers to get started with Jina. </span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block"><div class="jsx-3792957869 group inline-block relative"><button aria-label="Open Company dropdown" class="jsx-3792957869 text-gray-700 font-semibold py-2 px-4 rounded inline-flex items-center"><span class="jsx-3792957869 mr-1 font-bold">Company</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="jsx-3792957869 fill-current h-4 w-4 mt-2"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" class="jsx-3792957869"></path></svg></button><div class="jsx-3792957869 absolute hidden group-hover:block bg-transparent pt-7"><ul class="jsx-3792957869 dropdown"><li class="jsx-3792957869 hover:bg-gray-200"><a href="/about" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/about-icon.svg" alt="about icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">About</span></div><span class="jsx-3792957869 text-xs text-gray-500">Learn more about Jina AI as a company.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/careers" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Careers</span></div><span class="jsx-3792957869 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/events" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/events-icon.svg" alt="events icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Events</span></div><span class="jsx-3792957869 text-xs text-gray-500">Online and offline meetups, hackathons, workshops and webinars.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/news" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">News</span></div><span class="jsx-3792957869 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3792957869 hover:bg-gray-200"><a href="/contact" class="jsx-3792957869 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3792957869 leading-4"><div class="jsx-3792957869 flex items-center"><div class=""><img src="/assets/images/icons/contact-icon.svg" alt="contact icon" class="w-full h-full"/></div><span class="jsx-3792957869 text-gray-800 font-semibold text-sm ml-2">Contact</span></div><span class="jsx-3792957869 text-xs text-gray-500">Interested in cooperating with Jina AI? Get in touch!</span></div></a></li></ul></div></div></li><li class="jsx-649517993 hidden md:inline-block mr-1 font-bold text-gray-700"><a href="/blog/">Blog</a></li><div class="jsx-3128403005 md:hidden h-96 overflow-y-scroll"><ul class="jsx-3128403005 dropdown"><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/core" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/core-icon.svg" alt="core icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Jina Core</span></div><span class="jsx-3128403005 text-xs text-gray-500">An open-source framework for building multimedia search applications.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/hub" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/hub-icon.svg" alt="hub icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Jina Hub</span></div><span class="jsx-3128403005 text-xs text-gray-500">Jina’s community-driven module marketplace for building your Flow</span></div></a></li></div><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/contribute" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/contribute-icon.svg" alt="contribute icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Contribute</span></div><span class="jsx-3128403005 text-xs text-gray-500">Want to shape the future of neural search? Find out how you can contribute to Jina here.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/join" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/join-icon.svg" alt="join icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Join</span></div><span class="jsx-3128403005 text-xs text-gray-500">Join the Jina Slack community to meet the team and get support.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/learn" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/learn-icon.svg" alt="learn icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Learn</span></div><span class="jsx-3128403005 text-xs text-gray-500">Docs, tutorials and examples for developers to get started with Jina. </span></div></a></li></div><div class="jsx-3128403005 linkItem.label divide-solid divide-gray-200 divide-y"><li class="jsx-3128403005 hover:bg-gray-200"><a href="/about" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/about-icon.svg" alt="about icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">About</span></div><span class="jsx-3128403005 text-xs text-gray-500">Learn more about Jina AI as a company.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/careers" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/careers-icon.svg" alt="careers icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Careers</span></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in joining us? Find out what it&#x27;s like to work at Jina AI.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/events" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/events-icon.svg" alt="events icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Events</span></div><span class="jsx-3128403005 text-xs text-gray-500">Online and offline meetups, hackathons, workshops and webinars.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/news" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/news-icon.svg" alt="news icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">News</span></div><span class="jsx-3128403005 text-xs text-gray-500">Check out the latest news about our company and products.</span></div></a></li><li class="jsx-3128403005 hover:bg-gray-200"><a href="/contact" class="jsx-3128403005 py-2 px-4 block whitespace-no-wrap"><div class="jsx-3128403005 leading-4"><div class="jsx-3128403005 flex items-center"><div class=""><img src="/assets/images/icons/contact-icon.svg" alt="contact icon" class="w-full h-full"/></div><span class="jsx-3128403005 text-gray-800 font-semibold text-sm ml-2">Contact</span></div><span class="jsx-3128403005 text-xs text-gray-500">Interested in cooperating with Jina AI? Get in touch!</span></div></a></li></div></ul><span class="jsx-3128403005 text-gray-700 font-semibold text-sm ml-2 p-4">Blog</span></div><li class="jsx-223001487"><div class="jsx-3949856645 btn cursor-pointer flex items-center justify-center px-6 py-2 md:hidden btn-base btn-primary"><div class="mr-4 w-7"><img src="/assets/images/icons/GitHub-white-icon.svg" alt="GitHub-white icon" class="w-full h-full"/></div><span class="jsx-223001487 mr-4">Try it out!</span></div></li></ul></nav><div class="jsx-3949856645 btn cursor-pointer flex items-center justify-center px-6 py-2 hidden md:flex btn-base btn-primary"><div class="mr-4 w-7"><img src="/assets/images/icons/GitHub-white-icon.svg" alt="GitHub-white icon" class="w-full h-full"/></div><span class="jsx-223001487 mr-4">Try it out!</span></div></div></div></div><div class="mt-24"><div class="min-h-screen"><main><div class="container mx-auto px-5 flex flex-col"><img src="/assets/images/blog/tutorials/jina_executor_tutorial.png" alt="Tutorial: A deep-dive with Executors-image" class="mb-4 w-full"/><article class="mb-32 md:max-w-6xl md:shadow-lg xl:rounded-3xl md:px-32 md:py-20 md:mx-auto md:-mt-20 bg-white shadow"><div class="mb-3"><div class="inline-block px-2 py-0 rounded text-primary-500 bg-primary-500 bg-opacity-20 mr-2 mb-2">executor</div></div><h1 class="text-xl md:text-4xl font-bold tracking-tighter leading-tight md:leading-none mb-6 md:text-left">Tutorial: A deep-dive with Executors</h1><div class="flex items-center justify-between text-gray-600 mb-12"><div class="flex items-center"><img src="/assets/images/defaultProfileImg.svg" class="w-8 h-auto rounded-full mr-4" alt="Susana Guzman"/><div class="text-gray-600">Susana Guzman</div></div><time dateTime="2021-07-15">15 July, 2021</time></div><div class="jsx-4055754880 mx-auto markdown"><div class="jsx-4055754880 "><p>Last time we talked about how to create the <a href="https://jina.ai/tutorial.html">hello world chatbot</a>, but we didn't go much into Executors' details. Let's take a look at them now.
We will create a simple logger Executor. It will log whatever info from the Documents we pass to it and save it to a file. We will also see how to push our Executor to Hub to use it later.</p>
<h2>Set-up &#x26; overview</h2>
<p>We recommend creating a <a href="https://docs.python.org/3/tutorial/venv.html">new python virtual environment</a> to have a clean install of Jina and prevent dependency clashing.</p>
<p>We can start by installing Jina:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>pip install jina[standard]
</span>
</code></pre>
<p>For more information on installing Jina, refer to this <a href="https://github.com/jina-ai/jina#install">page</a>.</p>
<h2>Create your Executor</h2>
<p>To create your Executor, you just need to run this command in your terminal:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>jina hub new
</span>
</code></pre>
<p>A wizard will ask you some questions about the Executor. For the basic configuration, you will be asked two things: The Executor's name and where it should be saved. For this tutorial, we will call ours <strong>RequestLogger</strong>. And you can save it wherever you want to have your project. The wizard will ask if you want to have a more advanced configuration, but it is unnecessary for this tutorial.</p>
<h3>Logger Executor</h3>
<p>Once we followed the wizard, we have our folder structure ready. We can start working with the <code>executor.py</code>. Open that file, and let's import the following</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00;font-weight:normal">import</span><span> os
</span><span></span><span style="color:#fb9e00;font-weight:normal">import</span><span> time
</span><span></span><span style="color:#fb9e00;font-weight:normal">from</span><span> typing </span><span style="color:#fb9e00;font-weight:normal">import</span><span> </span><span class="hljs-type">Dict</span><span>
</span>
<span></span><span style="color:#fb9e00;font-weight:normal">from</span><span> jina </span><span style="color:#fb9e00;font-weight:normal">import</span><span> Executor, DocumentArray, requests
</span><span></span><span style="color:#fb9e00;font-weight:normal">from</span><span> jina.logging.logger </span><span style="color:#fb9e00;font-weight:normal">import</span><span> JinaLogger
</span>
</code></pre>
<p>Then we create our class that inherits from the <code>Executor</code> base class. We will call ours <code>RequestLogger</code></p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span class="hljs-class" style="color:#fb9e00;font-weight:normal">class</span><span class="hljs-class"> `</span><span class="hljs-class" style="color:#fad000;font-weight:normal">RequestLogger</span><span class="hljs-class">`(</span><span class="hljs-class hljs-params">Executor</span><span class="hljs-class">):</span><span>    
</span>
</code></pre>
<p>Our Executor will have two methods. One for the constructor and one for the actual logging:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span class="hljs-class" style="color:#fb9e00;font-weight:normal">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#fad000;font-weight:normal">RequestLogger</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">Executor</span><span class="hljs-class">):</span><span>    
</span><span>    </span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">__init__</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, **args, **kwargs</span><span class="hljs-function">):</span><span>
</span><span>        </span><span style="color:#ac65ff">#Whatever you need for our constructor</span><span>
</span>
<span>    </span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">log</span><span class="hljs-function">():</span><span>
</span><span>        </span><span style="color:#ac65ff">#Whatever we need for our logging</span><span>
</span>
</code></pre>
<p>It could be helpful to specify the number of Documents we want to work with, so we pass this directly in the arguments of our constructor</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>de __init__(self,
</span><span>                default_log_docs: </span><span style="color:#fb9e00">int</span><span> = </span><span style="color:#fa658d">1</span><span>,      </span><span style="color:#ac65ff"># here you can pass whatever other arguments you need                                                    </span><span>
</span>                *args, **kwargs):     
<!-- -->
</code></pre>
<p>Ok, now we start creating our constructor method. First thing you need to do before any custom logic is this:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00">super</span><span>().__init__(*args, **kwargs)
</span>
</code></pre>
<p>We now set the <code>default_log_docs</code> we got from the arguments:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>self.default_log_docs = default_log_docs
</span>
</code></pre>
<p>For logging, we need to create an instance for the <code>JinaLogger</code>. And we also need to specify the path where to save our file.</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>self.logger = JinaLogger(</span><span style="color:#4cd213">&#x27;req_logger&#x27;</span><span>)
</span><span>self.log_path = os.path.join(self.workspace, </span><span style="color:#4cd213">&#x27;log.txt&#x27;</span><span>)
</span>
</code></pre>
<p>And finally, we need to check the path doesn't exist already</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00;font-weight:normal">if</span><span> </span><span style="color:#fb9e00;font-weight:normal">not</span><span> os.path.exists(self.log_path):
</span><span>    </span><span style="color:#fb9e00;font-weight:normal">with</span><span> </span><span style="color:#fb9e00">open</span><span>(self.log_path, </span><span style="color:#4cd213">&#x27;w&#x27;</span><span>): </span><span style="color:#fb9e00;font-weight:normal">pass</span><span>
</span>
</code></pre>
<p>Ok, that's it for our constructor, by now we should have something like this:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>
</span><span></span><span class="hljs-class" style="color:#fb9e00;font-weight:normal">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#fad000;font-weight:normal">RequestLogger</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">Executor</span><span class="hljs-class">):</span><span>                                                                      </span><span style="color:#ac65ff"># needs to inherit from Executor</span><span>
</span><span>    </span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">__init__</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self,
</span><span class="hljs-function hljs-params">                default_log_docs: </span><span class="hljs-function hljs-params" style="color:#fb9e00">int</span><span class="hljs-function hljs-params"> = </span><span class="hljs-function hljs-params" style="color:#fa658d">1</span><span class="hljs-function hljs-params">,                                                          </span><span class="hljs-function hljs-params" style="color:#ac65ff"># number of documents to log</span><span class="hljs-function hljs-params">
</span><span class="hljs-function hljs-params">                *args, **kwargs</span><span class="hljs-function">):</span><span>                                                                   </span><span style="color:#ac65ff"># *args and **kwargs are required for Executor</span><span>
</span><span>        </span><span style="color:#fb9e00">super</span><span>().__init__(*args, **kwargs)                                                           </span><span style="color:#ac65ff"># before any custom logic</span><span>
</span>        self.default_log_docs = default_log_docs
<span>        self.logger = JinaLogger(</span><span style="color:#4cd213">&#x27;req_logger&#x27;</span><span>)                                                      </span><span style="color:#ac65ff"># create instance of JinaLogger</span><span>
</span><span>        self.log_path = os.path.join(self.workspace, </span><span style="color:#4cd213">&#x27;log.txt&#x27;</span><span>)                                     </span><span style="color:#ac65ff"># set path to save the log.txt</span><span>
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">if</span><span> </span><span style="color:#fb9e00;font-weight:normal">not</span><span> os.path.exists(self.log_path):                                                       </span><span style="color:#ac65ff"># check the file doesn&#x27;t exist already</span><span>
</span><span>            </span><span style="color:#fb9e00;font-weight:normal">with</span><span> </span><span style="color:#fb9e00">open</span><span>(self.log_path, </span><span style="color:#4cd213">&#x27;w&#x27;</span><span>): </span><span style="color:#fb9e00;font-weight:normal">pass</span><span>
</span>
<!-- -->
</code></pre>
<p>We can start creating our <code>log</code> method now. First of all, we need the <code>@requests</code> decorator. This is to communicate to the <code>Flow</code> when the function will be called and to which endpoint. We use <code>@requests</code> without any endpoint, so we will call our function on every request:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00">@requests                                                                                       </span><span>
</span><span>    </span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">log</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self,                                                                                   
</span><span class="hljs-function hljs-params">            docs: </span><span class="hljs-function hljs-params hljs-type">Optional</span><span class="hljs-function hljs-params">[DocumentArray],
</span><span class="hljs-function hljs-params">            parameters: </span><span class="hljs-function hljs-params hljs-type">Dict</span><span class="hljs-function hljs-params">,
</span><span class="hljs-function hljs-params">            **kwargs</span><span class="hljs-function">):</span><span>
</span>
</code></pre>
<p>It's important to note the arguments here. <strong>It's not possible to redefine the interface of the public methods decorated by <code>@requests</code></strong>. You can't change the name of these arguments. To see exactly which parameters you can use, check our cookbook about <a href="https://github.com/jina-ai/jina/blob/master/.github/2.0/cookbooks/Executor.md#method-arguments">Executors</a>.
If you would like to call your <code>log</code> function only on <code>index</code> time, you specify the endpoint with <code>on=</code>, like this:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00">@requests(</span><span class="hljs-params" style="color:#fb9e00">on=</span><span class="hljs-params" style="color:#4cd213">&#x27;/index&#x27;</span><span style="color:#fb9e00">)                                                                                      </span><span>
</span><span>    </span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">log</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self,                                                                           
</span><span class="hljs-function hljs-params">            </span><span class="hljs-function hljs-params hljs-type">Optional</span><span class="hljs-function hljs-params">[DocumentArray],
</span><span class="hljs-function hljs-params">            parameters: </span><span class="hljs-function hljs-params hljs-type">Dict</span><span class="hljs-function hljs-params">,
</span><span class="hljs-function hljs-params">            **kwargs</span><span class="hljs-function">):</span><span>
</span>
</code></pre>
<p>If you want more information on how to use this decorator, you could check our <a href="https://github.com/jina-ai/jina/blob/master/.github/2.0/cookbooks/Executor.md#requests-decorator">cookobook</a>. In this example, we want to call our <code>log</code> function on every request, so we don't specify any endpoint.</p>
<p>Now we can add the logic for our function. First, we will print a line that displays some information. And then, we will save the details from our Documents:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>self.logger.info(</span><span style="color:#4cd213">&#x27;Request being processed...&#x27;</span><span>)
</span>
<span>nr_docs = </span><span style="color:#fb9e00">int</span><span>(parameters.get(</span><span style="color:#4cd213">&#x27;log_docs&#x27;</span><span>, self.default_log_docs))                            </span><span style="color:#ac65ff"># accesing parameters (nr are passed as float due to Protobuf)</span><span>
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">with</span><span> </span><span style="color:#fb9e00">open</span><span>(self.log_path, </span><span style="color:#4cd213">&#x27;a&#x27;</span><span>) </span><span style="color:#fb9e00;font-weight:normal">as</span><span> f:
</span><span>            f.write(</span><span style="color:#4cd213">f&#x27;request at time </span><span style="color:#e3dfff">{time.time()}</span><span style="color:#4cd213"> with </span><span style="color:#e3dfff">{</span><span style="color:#fb9e00">len</span><span style="color:#e3dfff">(docs)}</span><span style="color:#4cd213"> documents:\n&#x27;</span><span>)
</span><span>            </span><span style="color:#fb9e00;font-weight:normal">for</span><span> i, doc </span><span style="color:#fb9e00;font-weight:normal">in</span><span> </span><span style="color:#fb9e00">enumerate</span><span>(docs):
</span><span>                f.write(</span><span style="color:#4cd213">f&#x27;\tsearching with doc.id </span><span style="color:#e3dfff">{doc.</span><span style="color:#fb9e00">id</span><span style="color:#e3dfff">}</span><span style="color:#4cd213">. content = </span><span style="color:#e3dfff">{doc.content}</span><span style="color:#4cd213">\n&#x27;</span><span>)
</span><span>                </span><span style="color:#fb9e00;font-weight:normal">if</span><span> i + </span><span style="color:#fa658d">1</span><span> == nr_docs:
</span><span>                    </span><span style="color:#fb9e00;font-weight:normal">break</span><span>
</span>
</code></pre>
<p>Here you can set whatever logic you need for your Executor. By now, your code should look like this:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00;font-weight:normal">import</span><span> os
</span><span></span><span style="color:#fb9e00;font-weight:normal">import</span><span> time
</span><span></span><span style="color:#fb9e00;font-weight:normal">from</span><span> typing </span><span style="color:#fb9e00;font-weight:normal">import</span><span> </span><span class="hljs-type">Dict</span><span>
</span>
<span></span><span style="color:#fb9e00;font-weight:normal">from</span><span> jina </span><span style="color:#fb9e00;font-weight:normal">import</span><span> Executor, DocumentArray, requests
</span><span></span><span style="color:#fb9e00;font-weight:normal">from</span><span> jina.logging.logger </span><span style="color:#fb9e00;font-weight:normal">import</span><span> JinaLogger
</span>
<!-- -->
<span></span><span class="hljs-class" style="color:#fb9e00;font-weight:normal">class</span><span class="hljs-class"> `</span><span class="hljs-class" style="color:#fad000;font-weight:normal">RequestLogger</span><span class="hljs-class">`(</span><span class="hljs-class hljs-params">Executor</span><span class="hljs-class">):</span><span>                                                                      </span><span style="color:#ac65ff"># needs to inherit from Executor</span><span>
</span><span>    </span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">__init__</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self,
</span><span class="hljs-function hljs-params">                default_log_docs: </span><span class="hljs-function hljs-params" style="color:#fb9e00">int</span><span class="hljs-function hljs-params"> = </span><span class="hljs-function hljs-params" style="color:#fa658d">1</span><span class="hljs-function hljs-params">,                                                          </span><span class="hljs-function hljs-params" style="color:#ac65ff"># your arguments</span><span class="hljs-function hljs-params">
</span><span class="hljs-function hljs-params">                *args, **kwargs</span><span class="hljs-function">):</span><span>                                                                   </span><span style="color:#ac65ff"># *args and **kwargs are required for Executor</span><span>
</span><span>        </span><span style="color:#fb9e00">super</span><span>().__init__(*args, **kwargs)                                                           </span><span style="color:#ac65ff"># before any custom logic</span><span>
</span>        self.default_log_docs = default_log_docs
<span>        self.logger = JinaLogger(</span><span style="color:#4cd213">&#x27;req_logger&#x27;</span><span>)
</span><span>        self.log_path = os.path.join(self.workspace, </span><span style="color:#4cd213">&#x27;log.txt&#x27;</span><span>)
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">if</span><span> </span><span style="color:#fb9e00;font-weight:normal">not</span><span> os.path.exists(self.log_path):
</span><span>            </span><span style="color:#fb9e00;font-weight:normal">with</span><span> </span><span style="color:#fb9e00">open</span><span>(self.log_path, </span><span style="color:#4cd213">&#x27;w&#x27;</span><span>): </span><span style="color:#fb9e00;font-weight:normal">pass</span><span>
</span>
<span></span><span style="color:#fb9e00">    @requests                                                                                       </span><span style="color:#ac65ff"># decorate, by default it will be called on every request</span><span>
</span><span>    </span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">log</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self,                                                                                   </span><span class="hljs-function hljs-params" style="color:#ac65ff"># arguments are automatically received</span><span class="hljs-function hljs-params">
</span><span class="hljs-function hljs-params">            </span><span class="hljs-function hljs-params hljs-type">Optional</span><span class="hljs-function hljs-params">[DocumentArray],
</span><span class="hljs-function hljs-params">            parameters: </span><span class="hljs-function hljs-params hljs-type">Dict</span><span class="hljs-function hljs-params">,
</span><span class="hljs-function hljs-params">            **kwargs</span><span class="hljs-function">):</span><span>
</span><span>        self.logger.info(</span><span style="color:#4cd213">&#x27;Request being processed...&#x27;</span><span>)
</span>
<span>        nr_docs = </span><span style="color:#fb9e00">int</span><span>(parameters.get(</span><span style="color:#4cd213">&#x27;log_docs&#x27;</span><span>, self.default_log_docs))                            </span><span style="color:#ac65ff"># accesing parameters (nr are passed as float due to Protobuf)</span><span>
</span><span>        </span><span style="color:#fb9e00;font-weight:normal">with</span><span> </span><span style="color:#fb9e00">open</span><span>(self.log_path, </span><span style="color:#4cd213">&#x27;a&#x27;</span><span>) </span><span style="color:#fb9e00;font-weight:normal">as</span><span> f:
</span><span>            f.write(</span><span style="color:#4cd213">f&#x27;request at time </span><span style="color:#e3dfff">{time.time()}</span><span style="color:#4cd213"> with </span><span style="color:#e3dfff">{</span><span style="color:#fb9e00">len</span><span style="color:#e3dfff">(docs)}</span><span style="color:#4cd213"> documents:\n&#x27;</span><span>)
</span><span>            </span><span style="color:#fb9e00;font-weight:normal">for</span><span> i, doc </span><span style="color:#fb9e00;font-weight:normal">in</span><span> </span><span style="color:#fb9e00">enumerate</span><span>(docs):
</span><span>                f.write(</span><span style="color:#4cd213">f&#x27;\tsearching with doc.id </span><span style="color:#e3dfff">{doc.</span><span style="color:#fb9e00">id</span><span style="color:#e3dfff">}</span><span style="color:#4cd213">. content = </span><span style="color:#e3dfff">{doc.content}</span><span style="color:#4cd213">\n&#x27;</span><span>)
</span><span>                </span><span style="color:#fb9e00;font-weight:normal">if</span><span> i + </span><span style="color:#fa658d">1</span><span> == nr_docs:
</span><span>                    </span><span style="color:#fb9e00;font-weight:normal">break</span><span>
</span>
</code></pre>
<p>And that's it. We have an <code>Executor</code> that takes whatever Documents we pass to it and logs them.</p>
<p>Ok, and what now? How can you use this in your app?</p>
<h3>Push your Executor to Hub</h3>
<p>We could use our Executor directly in our app, but here we will see how to push it to Jina Hub so we can share it with more people, or use it later.
For this, you need to open a terminal in the folder of your <code>executor.py</code>, so in this case, open a terminal inside the <code>RequestLogger</code> folder. And there you just need to type:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>jina hub push --public .
</span>
</code></pre>
<p>This means you will push your Executor publicly to Jina Hub. The last dot means you will use your current path. Once you run that command, you should see something like this:</p>
<p><img src="/assets/images/blog/tutorials/push-executor.png" alt="image"></p>
<p>Since we pushed our Executor using the <code>--public</code> flag, the only thing we will use is the ID, which is <code>zsor7fe6</code> in this case.</p>
<p>So now we have our Executor pushed to Jina Hub, and we can use it via the ID. Let's see how to do that.</p>
<h3>Use your Executor</h3>
<p>Let's now create some Flows that can use the Executor we just made. Create an <code>app.py</code> in the same folder as <code>RequestLogger</code>. Now open it and import <code>Flow</code>, <code>DocumentArray</code>, <code>Document</code> before we create our `main function:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00;font-weight:normal">from</span><span> jina </span><span style="color:#fb9e00;font-weight:normal">import</span><span> Flow, DocumentArray, Document
</span>
<span></span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">main</span><span class="hljs-function">():</span><span>
</span><span>    </span><span style="color:#ac65ff"># We&#x27;ll have our Flows here</span><span>
</span>
<span></span><span style="color:#fb9e00;font-weight:normal">if</span><span> __name__ == </span><span style="color:#4cd213">&#x27;__main__&#x27;</span><span>:
</span>    main()
<!-- -->
</code></pre>
<p>The Executor we just created logs whatever Documents we pass to it. So we need to create some Documents first. We'll do that on the <code>main()</code></p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">main</span><span class="hljs-function">():</span><span>
</span>    docs = DocumentArray()
<span>    docs.append(Document(content=</span><span style="color:#4cd213">&#x27;I love cats&#x27;</span><span>))                </span><span style="color:#ac65ff"># creating documents</span><span>
</span><span>    docs.append(Document(content=</span><span style="color:#4cd213">&#x27;I love every type of cat&#x27;</span><span>))
</span><span>    docs.append(Document(content=</span><span style="color:#4cd213">&#x27;I guess dogs are ok&#x27;</span><span>))
</span>
</code></pre>
<p>We have three Documents in one <code>DocumentArray</code>. Now let's create a <code>Flow</code> and add the Executor we created. We will reference it by the ID we got when we pushed it, in my case, it was <code>zsor7fe6</code>, but you change this for the ID you got:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>
</span>flow = Flow().add(                                              
<span>        uses=</span><span style="color:#4cd213">&#x27;jinahub+docker://zsor7fe6&#x27;</span><span>,
</span><span>        uses_with={                                         </span><span style="color:#ac65ff"># RequestLogger arguments</span><span>
</span><span>            </span><span style="color:#4cd213">&#x27;default_log_docs&#x27;</span><span>: </span><span style="color:#fa658d">3</span><span>
</span>        },
<span>        volumes=</span><span style="color:#4cd213">&#x27;workspace:/internal_workspace&#x27;</span><span>,                </span><span style="color:#ac65ff"># mapping local folders to docker instance folders</span><span>
</span><span>        uses_metas={                                        </span><span style="color:#ac65ff"># Executor (parent class) arguments</span><span>
</span><span>            </span><span style="color:#4cd213">&#x27;workspace&#x27;</span><span>: </span><span style="color:#4cd213">&#x27;/internal_workspace&#x27;</span><span>,                 </span><span style="color:#ac65ff"># this should match the above</span><span>
</span>        },
<!-- -->    )
<!-- -->
</code></pre>
<p>This seems like plenty of details but let's see them one by one.</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>uses=</span><span style="color:#4cd213">&#x27;jinahub+docker://zsor7fe6&#x27;</span><span>,
</span>
</code></pre>
<p>Here you use <code>uses=</code> to specify the image of your Executor. This will start a Docker container with the image of the Executor we built and deployed in the previous step. So don't forget to change the ID to the correct one.</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>uses_with={                                         </span><span style="color:#ac65ff"># RequestLogger arguments</span><span>
</span><span>            </span><span style="color:#4cd213">&#x27;default_log_docs&#x27;</span><span>: </span><span style="color:#fa658d">3</span><span>
</span>        },
<!-- -->
</code></pre>
<p>We need <code>uses_with=</code> to pass the arguments we need. In our case, we have only one argument: <code>default_log_docs</code>. In the constructor of our <code>RequestLogger</code> Executor, we defined the <code>default_log_docs</code> as <code>1</code>, but we override it here with <code>3</code>, so <code>3</code> will be the new value.</p>
<p>The next line refers to our workspace:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>volumes=</span><span style="color:#4cd213">&#x27;workspace:/internal_workspace&#x27;</span><span>,
</span>
</code></pre>
<p>Here we are mapping the <code>workspace</code> folder that will be created when we run our app to a folder called <code>internal_workspace</code> in Docker. We do this because our Executor logs the Documents into a file, and we want to save that file on our local disk. If we don't do that, the information would be saved in the Docker container, and you would need to access that container to see files.  To do this, we use <code>volumes=</code> and set it to our internal workspace.</p>
<p>The last part overrides arguments too, but this time for the Executor's base class:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span>uses_metas={                                                </span><span style="color:#ac65ff"># Executor (parent class) arguments</span><span>
</span><span>            </span><span style="color:#4cd213">&#x27;workspace&#x27;</span><span>: </span><span style="color:#4cd213">&#x27;/internal_workspace&#x27;</span><span>,                 </span><span style="color:#ac65ff"># this should match the above</span><span>
</span>        },
<!-- -->
</code></pre>
<p>In our case, the only argument we want to override is the name of the <code>workspace</code>. If you don't do this, a folder with the same name of your Executor class (<code>RequestLogger</code>) would be created, and your information would have been saved there. But since we just mounted our workspace with the name <code>internal_workspace</code> in Docker, we need to make a folder with that same name.</p>
<p>Ok, we have our <code>Flow</code> ready with the Executor we deployed previously. We can use it now. Let's start by indexing the Documents:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00;font-weight:normal">with</span><span> flow </span><span style="color:#fb9e00;font-weight:normal">as</span><span> f:                                                 </span><span style="color:#ac65ff"># Flow is a context manager</span><span>
</span>        f.post(
<span>            on=</span><span style="color:#4cd213">&#x27;/index&#x27;</span><span>,                                        </span><span style="color:#ac65ff"># the endpoint</span><span>
</span><span>            inputs=docs,                                        </span><span style="color:#ac65ff"># the documents we send as input</span><span>
</span>        )
<!-- -->
</code></pre>
<p>The Executor we created doesn't care about what endpoint is used, so it will perform the same operation no matter what endpoint you specify here. In this example, we set it to <code>on='/index'</code> anyway. Here you could use one for <code>index</code> and another one for <code>query</code> if you need it and your Executor has the proper endpoints.</p>
<p>So far, your code should look like this:</p>
<pre class="rounded-xl m-0 md:mr-6" style="display:block;overflow-x:auto;padding:0.5em;background:#2d2b57;font-weight:normal;color:#e3dfff" data-reactroot=""><code class="language-python" style="white-space:pre"><span style="color:#fb9e00;font-weight:normal">from</span><span> jina </span><span style="color:#fb9e00;font-weight:normal">import</span><span> Flow, DocumentArray, Document
</span>
<!-- -->
<span></span><span class="hljs-function" style="color:#fb9e00;font-weight:normal">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#fad000;font-weight:normal">main</span><span class="hljs-function">():</span><span>
</span>    docs = DocumentArray()
<span>    docs.append(Document(content=</span><span style="color:#4cd213">&#x27;I love cats&#x27;</span><span>))                </span><span style="color:#ac65ff"># creating documents</span><span>
</span><span>    docs.append(Document(content=</span><span style="color:#4cd213">&#x27;I love every type of cat&#x27;</span><span>))
</span><span>    docs.append(Document(content=</span><span style="color:#4cd213">&#x27;I guess dogs are ok&#x27;</span><span>))
</span>
<span>    flow = Flow().add(                                          </span><span style="color:#ac65ff"># provide as class name or jinahub+docker URI</span><span>
</span><span>        uses=</span><span style="color:#4cd213">&#x27;jinahub+docker://7dne55rj&#x27;</span><span>,
</span><span>        uses_with={                                         </span><span style="color:#ac65ff"># RequestLogger arguments</span><span>
</span><span>            </span><span style="color:#4cd213">&#x27;default_log_docs&#x27;</span><span>: </span><span style="color:#fa658d">3</span><span>
</span>        },
<span>        volumes=</span><span style="color:#4cd213">&#x27;workspace:/internal_workspace&#x27;</span><span>,                </span><span style="color:#ac65ff"># mapping local folders to docker instance folders</span><span>
</span><span>        uses_metas={                                        </span><span style="color:#ac65ff"># Executor (parent class) arguments</span><span>
</span><span>            </span><span style="color:#4cd213">&#x27;workspace&#x27;</span><span>: </span><span style="color:#4cd213">&#x27;/internal_workspace&#x27;</span><span>,                 </span><span style="color:#ac65ff"># this should match the above</span><span>
</span>        },
<!-- -->    )
<!-- -->
<span>    </span><span style="color:#fb9e00;font-weight:normal">with</span><span> flow </span><span style="color:#fb9e00;font-weight:normal">as</span><span> f:                                             </span><span style="color:#ac65ff"># Flow is a context manager</span><span>
</span>        f.post(
<span>            on=</span><span style="color:#4cd213">&#x27;/index&#x27;</span><span>,                                        </span><span style="color:#ac65ff"># the endpoint</span><span>
</span><span>            inputs=docs,                                        </span><span style="color:#ac65ff"># the documents we send as input</span><span>
</span>        )
<!-- -->
<!-- -->
<span></span><span style="color:#fb9e00;font-weight:normal">if</span><span> __name__ == </span><span style="color:#4cd213">&#x27;__main__&#x27;</span><span>:
</span>    main()
<!-- -->
</code></pre>
<p>And if you run this, you will see a new <code>workspace</code> folder created with two other folders inside. One called <code>RequestLogger</code> or whatever name you used in your class. And another folder for the sharding, but we won't talk about that in this tutorial because it's out of scope. Inside the sharding folder called <code>0</code> in this case, you will see a <code>log.txt</code> file. And there you will have the 3 Documents with their information.</p>
<p><img src="/assets/images/blog/tutorials/log.png" alt="image"></p>
<p>And that's it! You created an Executor, pushed it to Hub, and used it in your app.</p>
<p>There are still a lot of concepts to learn. So stay tuned for our following tutorials.</p>
<p>If you have any issues following this tutorial, you can always get support from our <a href="https://slack.jina.ai/">Slack community</a></p>
<h2>Community</h2>
<ul>
<li><a href="https://slack.jina.ai/">Slack community</a> - a communication platform for developers to discuss Jina.</li>
<li><a href="https://www.linkedin.com/company/jinaai/">LinkedIn</a> - get to know Jina AI as a company and find job opportunities.</li>
<li><a href="https://twitter.com/JinaAI_">Twitter</a> - follow us and interact with us using hashtag #JinaSearch.</li>
<li><a href="https://jina.ai">Company</a> - know more about our company, we are fully committed to open-source!</li>
</ul>
<h2>License</h2>
<p>Copyright (c) 2021 Jina AI Limited. All rights reserved.</p>
<p>Jina is licensed under the Apache License, Version 2.0. See <a href="https://github.com/jina-ai/jina/blob/master/LICENSE">LICENSE</a> for the full license text.</p>
</div></div></article></div></main></div></div><div class="jsx-1956813867"><div class="bg-primary-500 pt-20 text-white"><div class="jsx-1956813867 flex flex-col md:flex-row justify-between px-6 md:px-0"><div class="jsx-1956813867 footer-left-margin"></div><div class="jsx-1956813867 pr-4 md:py-16 md:mr-16"><div class="text-center md:text-left"><div class="flex md:justify-start"><div class="text-gray-900 flex items-center font-semibold text-3xl"><img src="/assets/images/logo-white.svg" alt="Jina.ai logo" class="w-24"/></div></div></div></div><div class="jsx-1956813867 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-16 py-16"><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Company</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/about/">About us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/careers/">Careers</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/contact/">Contact us</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/blog/">Blog</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Products</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/core/">Core</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/hub/">Hub</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Developers</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="/contribute/">Contribute</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/learn/">Learn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="/join/">Join</a></li></ul></nav></div><div class="jsx-1324436386 footer-links sm:text-left"><div class="jsx-1324436386 font-semibold text-white footer-items-title">Social</div><nav class="jsx-1324436386 mt-3"><ul class="jsx-1324436386"><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://github.com/jina-ai/jina/">GitHub</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://www.linkedin.com/company/jinaai/">LinkedIn</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://twitter.com/jinaAI_/">Twitter</a></li><li class="jsx-1956813867"><a class="jsx-1956813867" href="https://jina-ai.slack.com/">Slack</a></li></ul></nav></div></div><div class="jsx-1956813867 footer-right-margin"></div></div><div class="text-center bg-primary-400 text-gray-100 text-sm mt-12 py-6"><span class="block md:inline-block">© 2021 Jina AI GmbH. All rights reserved.</span><span class="mx-4 hidden md:inline-block">|</span><a href="/legal"><span>Terms of Service</span></a><span class="mx-4">|</span><a href="/legal"><span>Privacy Policy</span></a></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Tutorial: A deep-dive with Executors","date":"2021-07-15","slug":"tutorial-executors","author":"Susana Guzman","content":"\u003cp\u003eLast time we talked about how to create the \u003ca href=\"https://jina.ai/tutorial.html\"\u003ehello world chatbot\u003c/a\u003e, but we didn't go much into Executors' details. Let's take a look at them now.\nWe will create a simple logger Executor. It will log whatever info from the Documents we pass to it and save it to a file. We will also see how to push our Executor to Hub to use it later.\u003c/p\u003e\n\u003ch2\u003eSet-up \u0026#x26; overview\u003c/h2\u003e\n\u003cp\u003eWe recommend creating a \u003ca href=\"https://docs.python.org/3/tutorial/venv.html\"\u003enew python virtual environment\u003c/a\u003e to have a clean install of Jina and prevent dependency clashing.\u003c/p\u003e\n\u003cp\u003eWe can start by installing Jina:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003epip install jina[standard]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFor more information on installing Jina, refer to this \u003ca href=\"https://github.com/jina-ai/jina#install\"\u003epage\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003eCreate your Executor\u003c/h2\u003e\n\u003cp\u003eTo create your Executor, you just need to run this command in your terminal:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003ejina hub new\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eA wizard will ask you some questions about the Executor. For the basic configuration, you will be asked two things: The Executor's name and where it should be saved. For this tutorial, we will call ours \u003cstrong\u003eRequestLogger\u003c/strong\u003e. And you can save it wherever you want to have your project. The wizard will ask if you want to have a more advanced configuration, but it is unnecessary for this tutorial.\u003c/p\u003e\n\u003ch3\u003eLogger Executor\u003c/h3\u003e\n\u003cp\u003eOnce we followed the wizard, we have our folder structure ready. We can start working with the \u003ccode\u003eexecutor.py\u003c/code\u003e. Open that file, and let's import the following\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eimport os\nimport time\nfrom typing import Dict\n\nfrom jina import Executor, DocumentArray, requests\nfrom jina.logging.logger import JinaLogger\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen we create our class that inherits from the \u003ccode\u003eExecutor\u003c/code\u003e base class. We will call ours \u003ccode\u003eRequestLogger\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass `RequestLogger`(Executor):    \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOur Executor will have two methods. One for the constructor and one for the actual logging:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass RequestLogger(Executor):    \n    def __init__(self, **args, **kwargs):\n        #Whatever you need for our constructor\n\n    def log():\n        #Whatever we need for our logging\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt could be helpful to specify the number of Documents we want to work with, so we pass this directly in the arguments of our constructor\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003ede __init__(self,\n                default_log_docs: int = 1,      # here you can pass whatever other arguments you need                                                    \n                *args, **kwargs):     \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOk, now we start creating our constructor method. First thing you need to do before any custom logic is this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003esuper().__init__(*args, **kwargs)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe now set the \u003ccode\u003edefault_log_docs\u003c/code\u003e we got from the arguments:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eself.default_log_docs = default_log_docs\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFor logging, we need to create an instance for the \u003ccode\u003eJinaLogger\u003c/code\u003e. And we also need to specify the path where to save our file.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eself.logger = JinaLogger('req_logger')\nself.log_path = os.path.join(self.workspace, 'log.txt')\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd finally, we need to check the path doesn't exist already\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eif not os.path.exists(self.log_path):\n    with open(self.log_path, 'w'): pass\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOk, that's it for our constructor, by now we should have something like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e\nclass RequestLogger(Executor):                                                                      # needs to inherit from Executor\n    def __init__(self,\n                default_log_docs: int = 1,                                                          # number of documents to log\n                *args, **kwargs):                                                                   # *args and **kwargs are required for Executor\n        super().__init__(*args, **kwargs)                                                           # before any custom logic\n        self.default_log_docs = default_log_docs\n        self.logger = JinaLogger('req_logger')                                                      # create instance of JinaLogger\n        self.log_path = os.path.join(self.workspace, 'log.txt')                                     # set path to save the log.txt\n        if not os.path.exists(self.log_path):                                                       # check the file doesn't exist already\n            with open(self.log_path, 'w'): pass\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe can start creating our \u003ccode\u003elog\u003c/code\u003e method now. First of all, we need the \u003ccode\u003e@requests\u003c/code\u003e decorator. This is to communicate to the \u003ccode\u003eFlow\u003c/code\u003e when the function will be called and to which endpoint. We use \u003ccode\u003e@requests\u003c/code\u003e without any endpoint, so we will call our function on every request:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e@requests                                                                                       \n    def log(self,                                                                                   \n            docs: Optional[DocumentArray],\n            parameters: Dict,\n            **kwargs):\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt's important to note the arguments here. \u003cstrong\u003eIt's not possible to redefine the interface of the public methods decorated by \u003ccode\u003e@requests\u003c/code\u003e\u003c/strong\u003e. You can't change the name of these arguments. To see exactly which parameters you can use, check our cookbook about \u003ca href=\"https://github.com/jina-ai/jina/blob/master/.github/2.0/cookbooks/Executor.md#method-arguments\"\u003eExecutors\u003c/a\u003e.\nIf you would like to call your \u003ccode\u003elog\u003c/code\u003e function only on \u003ccode\u003eindex\u003c/code\u003e time, you specify the endpoint with \u003ccode\u003eon=\u003c/code\u003e, like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e@requests(on='/index')                                                                                      \n    def log(self,                                                                           \n            Optional[DocumentArray],\n            parameters: Dict,\n            **kwargs):\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you want more information on how to use this decorator, you could check our \u003ca href=\"https://github.com/jina-ai/jina/blob/master/.github/2.0/cookbooks/Executor.md#requests-decorator\"\u003ecookobook\u003c/a\u003e. In this example, we want to call our \u003ccode\u003elog\u003c/code\u003e function on every request, so we don't specify any endpoint.\u003c/p\u003e\n\u003cp\u003eNow we can add the logic for our function. First, we will print a line that displays some information. And then, we will save the details from our Documents:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eself.logger.info('Request being processed...')\n\nnr_docs = int(parameters.get('log_docs', self.default_log_docs))                            # accesing parameters (nr are passed as float due to Protobuf)\n        with open(self.log_path, 'a') as f:\n            f.write(f'request at time {time.time()} with {len(docs)} documents:\\n')\n            for i, doc in enumerate(docs):\n                f.write(f'\\tsearching with doc.id {doc.id}. content = {doc.content}\\n')\n                if i + 1 == nr_docs:\n                    break\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere you can set whatever logic you need for your Executor. By now, your code should look like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eimport os\nimport time\nfrom typing import Dict\n\nfrom jina import Executor, DocumentArray, requests\nfrom jina.logging.logger import JinaLogger\n\n\nclass `RequestLogger`(Executor):                                                                      # needs to inherit from Executor\n    def __init__(self,\n                default_log_docs: int = 1,                                                          # your arguments\n                *args, **kwargs):                                                                   # *args and **kwargs are required for Executor\n        super().__init__(*args, **kwargs)                                                           # before any custom logic\n        self.default_log_docs = default_log_docs\n        self.logger = JinaLogger('req_logger')\n        self.log_path = os.path.join(self.workspace, 'log.txt')\n        if not os.path.exists(self.log_path):\n            with open(self.log_path, 'w'): pass\n\n    @requests                                                                                       # decorate, by default it will be called on every request\n    def log(self,                                                                                   # arguments are automatically received\n            Optional[DocumentArray],\n            parameters: Dict,\n            **kwargs):\n        self.logger.info('Request being processed...')\n\n        nr_docs = int(parameters.get('log_docs', self.default_log_docs))                            # accesing parameters (nr are passed as float due to Protobuf)\n        with open(self.log_path, 'a') as f:\n            f.write(f'request at time {time.time()} with {len(docs)} documents:\\n')\n            for i, doc in enumerate(docs):\n                f.write(f'\\tsearching with doc.id {doc.id}. content = {doc.content}\\n')\n                if i + 1 == nr_docs:\n                    break\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd that's it. We have an \u003ccode\u003eExecutor\u003c/code\u003e that takes whatever Documents we pass to it and logs them.\u003c/p\u003e\n\u003cp\u003eOk, and what now? How can you use this in your app?\u003c/p\u003e\n\u003ch3\u003ePush your Executor to Hub\u003c/h3\u003e\n\u003cp\u003eWe could use our Executor directly in our app, but here we will see how to push it to Jina Hub so we can share it with more people, or use it later.\nFor this, you need to open a terminal in the folder of your \u003ccode\u003eexecutor.py\u003c/code\u003e, so in this case, open a terminal inside the \u003ccode\u003eRequestLogger\u003c/code\u003e folder. And there you just need to type:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003ejina hub push --public .\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis means you will push your Executor publicly to Jina Hub. The last dot means you will use your current path. Once you run that command, you should see something like this:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/tutorials/push-executor.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eSince we pushed our Executor using the \u003ccode\u003e--public\u003c/code\u003e flag, the only thing we will use is the ID, which is \u003ccode\u003ezsor7fe6\u003c/code\u003e in this case.\u003c/p\u003e\n\u003cp\u003eSo now we have our Executor pushed to Jina Hub, and we can use it via the ID. Let's see how to do that.\u003c/p\u003e\n\u003ch3\u003eUse your Executor\u003c/h3\u003e\n\u003cp\u003eLet's now create some Flows that can use the Executor we just made. Create an \u003ccode\u003eapp.py\u003c/code\u003e in the same folder as \u003ccode\u003eRequestLogger\u003c/code\u003e. Now open it and import \u003ccode\u003eFlow\u003c/code\u003e, \u003ccode\u003eDocumentArray\u003c/code\u003e, \u003ccode\u003eDocument\u003c/code\u003e before we create our `main function:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003efrom jina import Flow, DocumentArray, Document\n\ndef main():\n    # We'll have our Flows here\n\nif __name__ == '__main__':\n    main()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe Executor we just created logs whatever Documents we pass to it. So we need to create some Documents first. We'll do that on the \u003ccode\u003emain()\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef main():\n    docs = DocumentArray()\n    docs.append(Document(content='I love cats'))                # creating documents\n    docs.append(Document(content='I love every type of cat'))\n    docs.append(Document(content='I guess dogs are ok'))\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe have three Documents in one \u003ccode\u003eDocumentArray\u003c/code\u003e. Now let's create a \u003ccode\u003eFlow\u003c/code\u003e and add the Executor we created. We will reference it by the ID we got when we pushed it, in my case, it was \u003ccode\u003ezsor7fe6\u003c/code\u003e, but you change this for the ID you got:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e\nflow = Flow().add(                                              \n        uses='jinahub+docker://zsor7fe6',\n        uses_with={                                         # RequestLogger arguments\n            'default_log_docs': 3\n        },\n        volumes='workspace:/internal_workspace',                # mapping local folders to docker instance folders\n        uses_metas={                                        # Executor (parent class) arguments\n            'workspace': '/internal_workspace',                 # this should match the above\n        },\n    )\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis seems like plenty of details but let's see them one by one.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003euses='jinahub+docker://zsor7fe6',\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere you use \u003ccode\u003euses=\u003c/code\u003e to specify the image of your Executor. This will start a Docker container with the image of the Executor we built and deployed in the previous step. So don't forget to change the ID to the correct one.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003euses_with={                                         # RequestLogger arguments\n            'default_log_docs': 3\n        },\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe need \u003ccode\u003euses_with=\u003c/code\u003e to pass the arguments we need. In our case, we have only one argument: \u003ccode\u003edefault_log_docs\u003c/code\u003e. In the constructor of our \u003ccode\u003eRequestLogger\u003c/code\u003e Executor, we defined the \u003ccode\u003edefault_log_docs\u003c/code\u003e as \u003ccode\u003e1\u003c/code\u003e, but we override it here with \u003ccode\u003e3\u003c/code\u003e, so \u003ccode\u003e3\u003c/code\u003e will be the new value.\u003c/p\u003e\n\u003cp\u003eThe next line refers to our workspace:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003evolumes='workspace:/internal_workspace',\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere we are mapping the \u003ccode\u003eworkspace\u003c/code\u003e folder that will be created when we run our app to a folder called \u003ccode\u003einternal_workspace\u003c/code\u003e in Docker. We do this because our Executor logs the Documents into a file, and we want to save that file on our local disk. If we don't do that, the information would be saved in the Docker container, and you would need to access that container to see files.  To do this, we use \u003ccode\u003evolumes=\u003c/code\u003e and set it to our internal workspace.\u003c/p\u003e\n\u003cp\u003eThe last part overrides arguments too, but this time for the Executor's base class:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003euses_metas={                                                # Executor (parent class) arguments\n            'workspace': '/internal_workspace',                 # this should match the above\n        },\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn our case, the only argument we want to override is the name of the \u003ccode\u003eworkspace\u003c/code\u003e. If you don't do this, a folder with the same name of your Executor class (\u003ccode\u003eRequestLogger\u003c/code\u003e) would be created, and your information would have been saved there. But since we just mounted our workspace with the name \u003ccode\u003einternal_workspace\u003c/code\u003e in Docker, we need to make a folder with that same name.\u003c/p\u003e\n\u003cp\u003eOk, we have our \u003ccode\u003eFlow\u003c/code\u003e ready with the Executor we deployed previously. We can use it now. Let's start by indexing the Documents:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003ewith flow as f:                                                 # Flow is a context manager\n        f.post(\n            on='/index',                                        # the endpoint\n            inputs=docs,                                        # the documents we send as input\n        )\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe Executor we created doesn't care about what endpoint is used, so it will perform the same operation no matter what endpoint you specify here. In this example, we set it to \u003ccode\u003eon='/index'\u003c/code\u003e anyway. Here you could use one for \u003ccode\u003eindex\u003c/code\u003e and another one for \u003ccode\u003equery\u003c/code\u003e if you need it and your Executor has the proper endpoints.\u003c/p\u003e\n\u003cp\u003eSo far, your code should look like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003efrom jina import Flow, DocumentArray, Document\n\n\ndef main():\n    docs = DocumentArray()\n    docs.append(Document(content='I love cats'))                # creating documents\n    docs.append(Document(content='I love every type of cat'))\n    docs.append(Document(content='I guess dogs are ok'))\n\n    flow = Flow().add(                                          # provide as class name or jinahub+docker URI\n        uses='jinahub+docker://7dne55rj',\n        uses_with={                                         # RequestLogger arguments\n            'default_log_docs': 3\n        },\n        volumes='workspace:/internal_workspace',                # mapping local folders to docker instance folders\n        uses_metas={                                        # Executor (parent class) arguments\n            'workspace': '/internal_workspace',                 # this should match the above\n        },\n    )\n\n    with flow as f:                                             # Flow is a context manager\n        f.post(\n            on='/index',                                        # the endpoint\n            inputs=docs,                                        # the documents we send as input\n        )\n\n\nif __name__ == '__main__':\n    main()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd if you run this, you will see a new \u003ccode\u003eworkspace\u003c/code\u003e folder created with two other folders inside. One called \u003ccode\u003eRequestLogger\u003c/code\u003e or whatever name you used in your class. And another folder for the sharding, but we won't talk about that in this tutorial because it's out of scope. Inside the sharding folder called \u003ccode\u003e0\u003c/code\u003e in this case, you will see a \u003ccode\u003elog.txt\u003c/code\u003e file. And there you will have the 3 Documents with their information.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/blog/tutorials/log.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eAnd that's it! You created an Executor, pushed it to Hub, and used it in your app.\u003c/p\u003e\n\u003cp\u003eThere are still a lot of concepts to learn. So stay tuned for our following tutorials.\u003c/p\u003e\n\u003cp\u003eIf you have any issues following this tutorial, you can always get support from our \u003ca href=\"https://slack.jina.ai/\"\u003eSlack community\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eCommunity\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://slack.jina.ai/\"\u003eSlack community\u003c/a\u003e - a communication platform for developers to discuss Jina.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.linkedin.com/company/jinaai/\"\u003eLinkedIn\u003c/a\u003e - get to know Jina AI as a company and find job opportunities.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/JinaAI_\"\u003eTwitter\u003c/a\u003e - follow us and interact with us using hashtag #JinaSearch.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://jina.ai\"\u003eCompany\u003c/a\u003e - know more about our company, we are fully committed to open-source!\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eLicense\u003c/h2\u003e\n\u003cp\u003eCopyright (c) 2021 Jina AI Limited. All rights reserved.\u003c/p\u003e\n\u003cp\u003eJina is licensed under the Apache License, Version 2.0. See \u003ca href=\"https://github.com/jina-ai/jina/blob/master/LICENSE\"\u003eLICENSE\u003c/a\u003e for the full license text.\u003c/p\u003e\n","coverImage":"/assets/images/blog/tutorials/jina_executor_tutorial.png","tags":["executor"]}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"tutorial-executors"},"buildId":"GY5xhCRxI5WCCda8ilf4W","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-252cf839dc8f20f713fa.js" async=""></script><script src="/_next/static/chunks/framework-94f262366e752bd48d82.js" async=""></script><script src="/_next/static/chunks/commons-4667b98b62a60d7c050b.js" async=""></script><script src="/_next/static/chunks/main-9a4182dc8e7736869bf9.js" async=""></script><script src="/_next/static/chunks/pages/_app-c979da4c9387172560cc.js" async=""></script><script src="/_next/static/chunks/596-13cdde2fb793b77184ee.js" async=""></script><script src="/_next/static/chunks/522-e45333ebcf36799b860c.js" async=""></script><script src="/_next/static/chunks/373-350caaa5387e56e8b807.js" async=""></script><script src="/_next/static/chunks/93-f751efe1c02a3f02132d.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-c7b4bf8c8caf846516d2.js" async=""></script><script src="/_next/static/GY5xhCRxI5WCCda8ilf4W/_buildManifest.js" async=""></script><script src="/_next/static/GY5xhCRxI5WCCda8ilf4W/_ssgManifest.js" async=""></script></body></html>