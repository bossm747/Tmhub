import{am as W,j as D,O as ae,d as G,an as se,r as f,c as P,a7 as le,V as R,ao as X,v as T,x as $,z as J,J as oe,a2 as re,B as A,D as B,b as h,a0 as O,ap as ne,_ as Y,f as Z,A as Q,C as j,F as ie,aq as ce,Y as C,ar as F,w as U,W as ue,n as V,Z as ve,as as fe,L as me,M as de,$ as pe,ak as he,a1 as ye,at as ge,a9 as be,au as we}from"./index.cc8e0be8.js";const ee=Symbol("scrollbarContextKey"),H=4,Se={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},ze=({move:s,size:t,bar:n})=>({[n.size]:t,transform:`translate${n.axis}(${s}%)`}),Ee=W({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),ke=D({__name:"thumb",props:Ee,setup(s){const t=s,n="Thumb",a=ae(ee),i=G("scrollbar");a||se(n,"can not inject scrollbar context");const u=f(),l=f(),v=f({}),r=f(!1);let y=!1,g=!1,b=Z?document.onselectstart:null;const o=P(()=>Se[t.vertical?"vertical":"horizontal"]),k=P(()=>ze({size:t.size,move:t.move,bar:o.value})),w=P(()=>u.value[o.value.offset]**2/a.wrapElement[o.value.scrollSize]/t.ratio/l.value[o.value.offset]),N=c=>{var m;if(c.stopPropagation(),c.ctrlKey||[1,2].includes(c.button))return;(m=window.getSelection())==null||m.removeAllRanges(),M(c);const d=c.currentTarget;!d||(v.value[o.value.axis]=d[o.value.offset]-(c[o.value.client]-d.getBoundingClientRect()[o.value.direction]))},L=c=>{if(!l.value||!u.value||!a.wrapElement)return;const m=Math.abs(c.target.getBoundingClientRect()[o.value.direction]-c[o.value.client]),d=l.value[o.value.offset]/2,z=(m-d)*100*w.value/u.value[o.value.offset];a.wrapElement[o.value.scroll]=z*a.wrapElement[o.value.scrollSize]/100},M=c=>{c.stopImmediatePropagation(),y=!0,document.addEventListener("mousemove",x),document.addEventListener("mouseup",_),b=document.onselectstart,document.onselectstart=()=>!1},x=c=>{if(!u.value||!l.value||y===!1)return;const m=v.value[o.value.axis];if(!m)return;const d=(u.value.getBoundingClientRect()[o.value.direction]-c[o.value.client])*-1,z=l.value[o.value.offset]-m,te=(d-z)*100*w.value/u.value[o.value.offset];a.wrapElement[o.value.scroll]=te*a.wrapElement[o.value.scrollSize]/100},_=()=>{y=!1,v.value[o.value.axis]=0,document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",_),p(),g&&(r.value=!1)},S=()=>{g=!1,r.value=!!t.size},e=()=>{g=!0,r.value=y};le(()=>{p(),document.removeEventListener("mouseup",_)});const p=()=>{document.onselectstart!==b&&(document.onselectstart=b)};return R(X(a,"scrollbarElement"),"mousemove",S),R(X(a,"scrollbarElement"),"mouseleave",e),(c,m)=>(T(),$(ne,{name:h(i).b("fade"),persisted:""},{default:J(()=>[oe(A("div",{ref_key:"instance",ref:u,class:B([h(i).e("bar"),h(i).is(h(o).key)]),onMousedown:L},[A("div",{ref_key:"thumb",ref:l,class:B(h(i).e("thumb")),style:O(h(k)),onMousedown:N},null,38)],34),[[re,c.always||r.value]])]),_:1},8,["name"]))}});var I=Y(ke,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const He=W({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),_e=D({__name:"bar",props:He,setup(s,{expose:t}){const n=s,a=f(0),i=f(0);return t({handleScroll:l=>{if(l){const v=l.offsetHeight-H,r=l.offsetWidth-H;i.value=l.scrollTop*100/v*n.ratioY,a.value=l.scrollLeft*100/r*n.ratioX}}}),(l,v)=>(T(),Q(ie,null,[j(I,{move:a.value,ratio:l.ratioX,size:l.width,always:l.always},null,8,["move","ratio","size","always"]),j(I,{move:i.value,ratio:l.ratioY,size:l.height,vertical:"",always:l.always},null,8,["move","ratio","size","always"])],64))}});var Ce=Y(_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Te=W({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:ce([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Be={scroll:({scrollTop:s,scrollLeft:t})=>[s,t].every(C)},Le={name:"ElScrollbar"},xe=D({...Le,props:Te,emits:Be,setup(s,{expose:t,emit:n}){const a=s,i=G("scrollbar");let u,l;const v=f(),r=f(),y=f(),g=f("0"),b=f("0"),o=f(),k=f(1),w=f(1),N=P(()=>{const e={};return a.height&&(e.height=F(a.height)),a.maxHeight&&(e.maxHeight=F(a.maxHeight)),[a.wrapStyle,e]}),L=()=>{var e;r.value&&((e=o.value)==null||e.handleScroll(r.value),n("scroll",{scrollTop:r.value.scrollTop,scrollLeft:r.value.scrollLeft}))};function M(e,p){ge(e)?r.value.scrollTo(e):C(e)&&C(p)&&r.value.scrollTo(e,p)}const x=e=>{!C(e)||(r.value.scrollTop=e)},_=e=>{!C(e)||(r.value.scrollLeft=e)},S=()=>{if(!r.value)return;const e=r.value.offsetHeight-H,p=r.value.offsetWidth-H,c=e**2/r.value.scrollHeight,m=p**2/r.value.scrollWidth,d=Math.max(c,a.minSize),z=Math.max(m,a.minSize);k.value=c/(e-c)/(d/(e-d)),w.value=m/(p-m)/(z/(p-z)),b.value=d+H<e?`${d}px`:"",g.value=z+H<p?`${z}px`:""};return U(()=>a.noresize,e=>{e?(u==null||u(),l==null||l()):({stop:u}=ue(y,S),l=R("resize",S))},{immediate:!0}),U(()=>[a.maxHeight,a.height],()=>{a.native||V(()=>{var e;S(),r.value&&((e=o.value)==null||e.handleScroll(r.value))})}),ve(ee,fe({scrollbarElement:v,wrapElement:r})),me(()=>{a.native||V(()=>{S()})}),de(()=>S()),t({wrap$:r,update:S,scrollTo:M,setScrollTop:x,setScrollLeft:_,handleScroll:L}),(e,p)=>(T(),Q("div",{ref_key:"scrollbar$",ref:v,class:B(h(i).b())},[A("div",{ref_key:"wrap$",ref:r,class:B([e.wrapClass,h(i).e("wrap"),{[h(i).em("wrap","hidden-default")]:!e.native}]),style:O(h(N)),onScroll:L},[(T(),$(he(e.tag),{ref_key:"resize$",ref:y,class:B([h(i).e("view"),e.viewClass]),style:O(e.viewStyle)},{default:J(()=>[pe(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?ye("v-if",!0):(T(),$(Ce,{key:0,ref_key:"barRef",ref:o,height:b.value,width:g.value,always:e.always,"ratio-x":w.value,"ratio-y":k.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Pe=Y(xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Me=be(Pe),E=new Map;let K;Z&&(document.addEventListener("mousedown",s=>K=s),document.addEventListener("mouseup",s=>{for(const t of E.values())for(const{documentHandler:n}of t)n(s,K)}));function q(s,t){let n=[];return Array.isArray(t.arg)?n=t.arg:we(t.arg)&&n.push(t.arg),function(a,i){const u=t.instance.popperRef,l=a.target,v=i==null?void 0:i.target,r=!t||!t.instance,y=!l||!v,g=s.contains(l)||s.contains(v),b=s===l,o=n.length&&n.some(w=>w==null?void 0:w.contains(l))||n.length&&n.includes(v),k=u&&(u.contains(l)||u.contains(v));r||y||g||b||o||k||t.value(a,i)}}const Re={beforeMount(s,t){E.has(s)||E.set(s,[]),E.get(s).push({documentHandler:q(s,t),bindingFn:t.value})},updated(s,t){E.has(s)||E.set(s,[]);const n=E.get(s),a=n.findIndex(u=>u.bindingFn===t.oldValue),i={documentHandler:q(s,t),bindingFn:t.value};a>=0?n.splice(a,1,i):n.push(i)},unmounted(s){E.delete(s)}};export{Re as C,Me as E};
